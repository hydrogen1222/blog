
<!DOCTYPE html>
<html lang="en">
    
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="Hexo">
    <title>Tag: 科研 - Hexo</title>
    <meta name="author" content="John Doe">
    
    
    
    <script type="application/ld+json">{}</script>
    <meta property="og:type" content="blog">
<meta property="og:title" content="Hexo">
<meta property="og:url" content="https://hydrogen1222.xyz/all-tags/%E7%A7%91%E7%A0%94/page/3/index.html">
<meta property="og:site_name" content="Hexo">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="John Doe">
<meta name="twitter:card" content="summary">
    
    
        
    
    
    
    
    
    <!--STYLES-->
    
<link rel="stylesheet" href="/assets/css/all.css">

    
<link rel="stylesheet" href="/assets/css/jquery.fancybox.css">

    
<link rel="stylesheet" href="/assets/css/thumbs.css">

    
<link rel="stylesheet" href="/assets/css/tranquilpeak.css">

    <!--STYLES END-->
    

    

    




<script id="MathJax-script" async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
<script>
  MathJax = {
    tex: {
      inlineMath: [['$', '$'], ['\\(', '\\)']],
      displayMath: [['$$', '$$'], ['\\[', '\\]']],
      tags: 'ams'
    },
    svg: {
      fontCache: 'global'
    }
  };
</script>





<!-- hexo injector head_end start -->
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/hexo-math@4.0.0/dist/style.css">
<!-- hexo injector head_end end --></head>

    <body>
        <div id="blog">
            <!-- Define author's picture -->


    

<header id="header" data-behavior="1">
    <i id="btn-open-sidebar" class="fa fa-lg fa-bars"></i>
    <div class="header-title">
        <a
            class="header-title-link"
            href="/"
            aria-label=""
        >
            Hexo
        </a>
    </div>
    
        
            <a
                class="header-right-picture "
                href="#about"
                aria-label="Open the link: /#about"
            >
        
        
        </a>
    
</header>

            <!-- Define author's picture -->


<nav id="sidebar" data-behavior="1">
    <div class="sidebar-container">
        
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/"
                            
                            rel="noopener"
                            title="Home"
                        >
                        <i class="sidebar-button-icon fa fa-home" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Home</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-categories"
                            
                            rel="noopener"
                            title="Categories"
                        >
                        <i class="sidebar-button-icon fa fa-bookmark" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Categories</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-tags"
                            
                            rel="noopener"
                            title="Tags"
                        >
                        <i class="sidebar-button-icon fa fa-tags" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Tags</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/all-archives"
                            
                            rel="noopener"
                            title="Archives"
                        >
                        <i class="sidebar-button-icon fa fa-archive" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Archives</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link open-algolia-search"
                            href="#search"
                            
                            rel="noopener"
                            title="Search"
                        >
                        <i class="sidebar-button-icon fa fa-search" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Search</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="#about"
                            
                            rel="noopener"
                            title="About"
                        >
                        <i class="sidebar-button-icon fa fa-question" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">About</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://github.com/"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="GitHub"
                        >
                        <i class="sidebar-button-icon fab fa-github" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">GitHub</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="http://stackoverflow.com/users"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="Stack Overflow"
                        >
                        <i class="sidebar-button-icon fab fa-stack-overflow" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Stack Overflow</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://twitter.com/"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="Twitter"
                        >
                        <i class="sidebar-button-icon fab fa-twitter" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Twitter</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://facebook.com/"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="Facebook"
                        >
                        <i class="sidebar-button-icon fab fa-facebook" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Facebook</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://plus.google.com/"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="Google +"
                        >
                        <i class="sidebar-button-icon fab fa-google-plus" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Google +</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="https://www.linkedin.com/profile/"
                            
                                target="_blank"
                            
                            rel="noopener"
                            title="LinkedIn"
                        >
                        <i class="sidebar-button-icon fab fa-linkedin" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">LinkedIn</span>
                    </a>
            </li>
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/mailto"
                            
                            rel="noopener"
                            title="Mail"
                        >
                        <i class="sidebar-button-icon fa fa-envelope" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">Mail</span>
                    </a>
            </li>
            
        </ul>
        
            <ul class="sidebar-buttons">
            
                <li class="sidebar-button">
                    
                        <a
                            class="sidebar-button-link "
                            href="/atom.xml"
                            
                            rel="noopener"
                            title="RSS"
                        >
                        <i class="sidebar-button-icon fa fa-rss" aria-hidden="true"></i>
                        <span class="sidebar-button-desc">RSS</span>
                    </a>
            </li>
            
        </ul>
        
    </div>
</nav>

            
            <div id="main" data-behavior="1"
                 class="
                        hasCoverMetaIn
                        ">
                
    <section class="postShorten-group main-content-wrap">
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2025/04/27/%E7%A7%91%E7%A0%94/VASP/Starry%20Sky/Cu(111)%E6%99%B6%E9%9D%A2%E7%9A%84%E4%BC%98%E5%8C%96%E8%AE%A1%E7%AE%97/"
                            aria-label=": p(1x1)Cu(111)的优化计算"
                        >
                            p(1x1)Cu(111)的优化计算
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2025-04-27T20:09:00+08:00">
	
		    Apr 27, 2025
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/all-categories/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%9A%84%E7%A7%91%E7%A0%94%E4%B9%8B%E6%97%85/">从零开始的科研之旅</a>, <a class="category-link" href="/all-categories/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%9A%84%E7%A7%91%E7%A0%94%E4%B9%8B%E6%97%85/VASP/">VASP</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h2 id="poscar的修改"><code>POSCAR</code>的修改</h2>
<p>与单点计算不同，优化计算可能涉及到离子步迭代、晶格常数的改变。但<code>Cu(111)</code>晶面的优化计算并==不只是==在<code>INCAR</code>里添加参数<code>IBRION</code>，优化计算确实允许原子弛豫，但在<code>slab模型</code>中，<strong>只允许表面的两层原子允许弛豫，而下面的那些原子则直接固定住</strong></p>
<blockquote>
<p>这样做的物理意义在于：在真实的环境下，催化剂体相看做是不变的，只有表面的原子参与催化反应</p>
</blockquote>
<p>前面在乙醇分子的振动频率分析里面已经学过了，添加以下选择性动力学标记<code>Slective Dynamics</code>即可</p>
<p><strong>PS：看分数坐标即可知道哪些是表层哪些是体相</strong></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">CONTCAR\(1\1\1)</span><br><span class="line">1.0</span><br><span class="line">        2.5701000690         0.0000000000         0.0000000000</span><br><span class="line">       -1.2850500345         2.2257719501         0.0000000000</span><br><span class="line">        0.0000000000         0.0000000000        21.2954006195</span><br><span class="line">   Cu</span><br><span class="line">    4</span><br><span class="line">Selective Dynamics</span><br><span class="line">Direct</span><br><span class="line">     0.000000000         0.000000000         0.000000000 F F F</span><br><span class="line">     0.666670000         0.333330000         0.098540000 F F F</span><br><span class="line">     0.333330000         0.666670000         0.197080000 T T T</span><br><span class="line">     0.000000000         0.000000000         0.295620000 T T T</span><br></pre></td></tr></table></figure>
<h2 id="incar的修改"><code>INCAR</code>的修改</h2>
<p>现在是优化计算，就得加上算法了，大师兄用的<code>IBRION = 2</code>，那我就对比一下，用<code>IBRION = 1</code>试一下吧</p>
<h3 id="ibrion-1"><code>IBRION = 1</code></h3>
<p>官方wiki说准牛顿迭代法对<code>POTIM</code>比较敏感，那我就调小一点吧</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">SYSTEM = Cu-concentional-slab-statistic</span><br><span class="line">ISMEAR = 1</span><br><span class="line">SIGMA = 0.5</span><br><span class="line">ALGO = Normal</span><br><span class="line">ENCUT = 700</span><br><span class="line">EDIFF = 1E-6</span><br><span class="line">LDIPOL = .TRUE.</span><br><span class="line">IDIPOL = 3</span><br><span class="line">NCORE = 20</span><br><span class="line">NSW = 500</span><br><span class="line">NELM = 200</span><br><span class="line">IBRION = 1</span><br><span class="line">POTIM = 0.05</span><br></pre></td></tr></table></figure>
<p>成功收敛，迭代情况</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><span class="line">[ctan@baifq-hpc141 primitive-slab-opt]$ <span class="built_in">cat</span> OSZICAR</span><br><span class="line">       N       E                     dE             d eps       ncg     rms          rms(c)</span><br><span class="line">DAV:   1     0.380094340720E+03    0.38009E+03   -0.23566E+04  2548   0.269E+03</span><br><span class="line">DAV:   2     0.163549324393E+02   -0.36374E+03   -0.35588E+03  2548   0.438E+02</span><br><span class="line">DAV:   3    -0.154087935417E+02   -0.31764E+02   -0.30239E+02  2816   0.186E+02</span><br><span class="line">DAV:   4    -0.171245615883E+02   -0.17158E+01   -0.16227E+01  2856   0.463E+01</span><br><span class="line">DAV:   5    -0.171794690835E+02   -0.54907E-01   -0.54864E-01  2954   0.690E+00    0.146E+01</span><br><span class="line">DAV:   6    -0.156158003013E+02    0.15637E+01   -0.42034E+01  2712   0.133E+02    0.829E+00</span><br><span class="line">DAV:   7    -0.140078760986E+02    0.16079E+01   -0.79564E+00  2992   0.596E+01    0.790E-01</span><br><span class="line">DAV:   8    -0.140167702165E+02   -0.88941E-02   -0.53048E-01  3968   0.226E+01    0.122E+00</span><br><span class="line">DAV:   9    -0.140083290175E+02    0.84412E-02   -0.45257E-01  3848   0.291E+01    0.104E+00</span><br><span class="line">DAV:  10    -0.139869448329E+02    0.21384E-01   -0.20408E-01  4800   0.187E+01    0.615E-01</span><br><span class="line">DAV:  11    -0.139810722283E+02    0.58726E-02   -0.60166E-02  4016   0.780E+00    0.113E-01</span><br><span class="line">DAV:  12    -0.139806486192E+02    0.42361E-03   -0.10641E-02  3786   0.272E+00    0.980E-02</span><br><span class="line">DAV:  13    -0.139810968626E+02   -0.44824E-03   -0.87951E-03  4868   0.367E+00    0.844E-02</span><br><span class="line">DAV:  14    -0.139803135502E+02    0.78331E-03   -0.42901E-03  4920   0.238E+00    0.308E-02</span><br><span class="line">DAV:  15    -0.139802543403E+02    0.59210E-04   -0.32281E-04  3540   0.324E-01    0.182E-02</span><br><span class="line">DAV:  16    -0.139803209356E+02   -0.66595E-04   -0.83429E-04  4558   0.937E-01    0.301E-02</span><br><span class="line">DAV:  17    -0.139803228923E+02   -0.19567E-05   -0.15361E-04  3074   0.264E-01    0.168E-02</span><br><span class="line">DAV:  18    -0.139803417113E+02   -0.18819E-04   -0.36368E-04  4750   0.744E-01    0.954E-03</span><br><span class="line">DAV:  19    -0.139803412500E+02    0.46126E-06   -0.10659E-04  2728   0.404E-01    0.517E-03</span><br><span class="line">DAV:  20    -0.139803676358E+02   -0.26386E-04   -0.80023E-05  3638   0.357E-01    0.818E-03</span><br><span class="line">DAV:  21    -0.139803787022E+02   -0.11066E-04   -0.13797E-05  3336   0.920E-02    0.101E-02</span><br><span class="line">DAV:  22    -0.139803765945E+02    0.21077E-05   -0.39937E-05  2614   0.265E-01    0.222E-03</span><br><span class="line">DAV:  23    -0.139803888096E+02   -0.12215E-04   -0.60877E-05  2528   0.297E-01    0.725E-03</span><br><span class="line">DAV:  24    -0.139803907613E+02   -0.19517E-05   -0.71066E-06  3156   0.553E-02    0.611E-03</span><br><span class="line">DAV:  25    -0.139803916036E+02   -0.84239E-06   -0.13171E-06  1634   0.198E-02</span><br><span class="line">   1 F= -.13980392E+02 E0= -.13976732E+02  d E =-.139804E+02</span><br><span class="line">       N       E                     dE             d eps       ncg     rms          rms(c)</span><br><span class="line">DAV:   1    -0.139807173282E+02   -0.32657E-03    0.14112E+02  2602   0.612E+00    0.467E-03</span><br><span class="line">DAV:   2    -0.139804390721E+02    0.27826E-03   -0.16468E-04  4156   0.597E-01    0.165E-02</span><br><span class="line">DAV:   3    -0.139804261532E+02    0.12919E-04   -0.10604E-04  3756   0.481E-01    0.167E-03</span><br><span class="line">DAV:   4    -0.139804267349E+02   -0.58173E-06   -0.46237E-06  2500   0.225E-02</span><br><span class="line">   2 F= -.13980427E+02 E0= -.13976770E+02  d E =-.351312E-04</span><br><span class="line">       N       E                     dE             d eps       ncg     rms          rms(c)</span><br><span class="line">DAV:   1    -0.139804330907E+02   -0.69375E-05    0.16389E+02  2632   0.107E+01    0.452E-02</span><br><span class="line">DAV:   2    -0.139809280760E+02   -0.49499E-03   -0.57833E-03  3892   0.164E+00    0.586E-02</span><br><span class="line">DAV:   3    -0.139808976764E+02    0.30400E-04   -0.10914E-03  4308   0.154E+00    0.348E-02</span><br><span class="line">DAV:   4    -0.139808745784E+02    0.23098E-04   -0.21714E-04  4572   0.607E-01    0.278E-02</span><br><span class="line">DAV:   5    -0.139808671461E+02    0.74323E-05   -0.56092E-05  4164   0.315E-01    0.187E-02</span><br><span class="line">DAV:   6    -0.139808630630E+02    0.40832E-05   -0.44161E-05  4470   0.289E-01    0.698E-03</span><br><span class="line">DAV:   7    -0.139808615417E+02    0.15213E-05   -0.76178E-06  1946   0.121E-01    0.290E-03</span><br><span class="line">DAV:   8    -0.139808615453E+02   -0.35725E-08   -0.25204E-06  1800   0.234E-02</span><br><span class="line">   3 F= -.13980862E+02 E0= -.13977262E+02  d E =-.434810E-03</span><br><span class="line">       N       E                     dE             d eps       ncg     rms          rms(c)</span><br><span class="line">DAV:   1    -0.139808810490E+02   -0.19507E-04    0.54240E+01  2632   0.376E+00    0.136E-02</span><br><span class="line">DAV:   2    -0.139809351461E+02   -0.54097E-04   -0.54142E-04  3890   0.509E-01    0.173E-02</span><br><span class="line">DAV:   3    -0.139809327068E+02    0.24393E-05   -0.10930E-04  4292   0.484E-01    0.104E-02</span><br><span class="line">DAV:   4    -0.139809303964E+02    0.23104E-05   -0.18479E-05  2078   0.186E-01    0.828E-03</span><br><span class="line">DAV:   5    -0.139809300877E+02    0.30864E-06   -0.87511E-06  2780   0.122E-01</span><br><span class="line">   4 F= -.13980930E+02 E0= -.13977356E+02  d E =-.685425E-04</span><br><span class="line">       N       E                     dE             d eps       ncg     rms          rms(c)</span><br><span class="line">DAV:   1    -0.139808203045E+02    0.11009E-03    0.13819E+02  3808   0.576E+00    0.330E-03</span><br><span class="line">DAV:   2    -0.139808743367E+02   -0.54032E-04    0.77025E+00  2180   0.218E+00    0.818E-03</span><br><span class="line">DAV:   3    -0.139809353212E+02   -0.60985E-04   -0.25088E-05  2014   0.239E-01    0.103E-03</span><br><span class="line">DAV:   4    -0.139809353447E+02   -0.23522E-07   -0.62565E-07  1516   0.240E-02</span><br><span class="line">   5 F= -.13980935E+02 E0= -.13977350E+02  d E =-.525697E-05</span><br></pre></td></tr></table></figure>
<p>能量：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[ctan@baifq-hpc141 primitive-slab-opt]$ grep <span class="string">&#x27;  without&#x27;</span> OUTCAR</span><br><span class="line">  energy  without entropy=      -13.96941183  energy(sigma-&gt;0) =      -13.97673168</span><br><span class="line">  energy  without entropy=      -13.96945528  energy(sigma-&gt;0) =      -13.97676958</span><br><span class="line">  energy  without entropy=      -13.97006413  energy(sigma-&gt;0) =      -13.97726241</span><br><span class="line">  energy  without entropy=      -13.97020643  energy(sigma-&gt;0) =      -13.97735554</span><br><span class="line">  energy  without entropy=      -13.97017969  energy(sigma-&gt;0) =      -13.97735013</span><br></pre></td></tr></table></figure>
<p>计算时间：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">General timing and accounting informations for this job:</span><br><span class="line">========================================================</span><br><span class="line"></span><br><span class="line">                 Total CPU time used (sec):       53.453</span><br><span class="line">                           User time (sec):       49.556</span><br><span class="line">                         System time (sec):        3.896</span><br><span class="line">                        Elapsed time (sec):       55.466</span><br><span class="line"></span><br><span class="line">                  Maximum memory used (kb):      134456.</span><br><span class="line">                  Average memory used (kb):          N/A</span><br><span class="line"></span><br><span class="line">                         Minor page faults:        12550</span><br><span class="line">                         Major page faults:          686</span><br><span class="line">                Voluntary context switches:         1587</span><br></pre></td></tr></table></figure>
<h3 id="ibrion-2"><code>IBRION =2</code></h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">SYSTEM = Cu-concentional-slab-statistic</span><br><span class="line">ISMEAR = 1</span><br><span class="line">SIGMA = 0.5</span><br><span class="line">ALGO = Normal</span><br><span class="line">ENCUT = 700</span><br><span class="line">EDIFF = 1E-6</span><br><span class="line">LDIPOL = .TRUE.</span><br><span class="line">IDIPOL = 3</span><br><span class="line">NCORE = 20</span><br><span class="line">NSW = 500</span><br><span class="line">NELM = 200</span><br><span class="line">IBRION = 2</span><br><span class="line">POTIM = 0.1</span><br></pre></td></tr></table></figure>
<p>成功收敛，迭代情况：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br></pre></td><td class="code"><pre><span class="line">       N       E                     dE             d eps       ncg     rms          rms(c)</span><br><span class="line">DAV:   1     0.380094340720E+03    0.38009E+03   -0.23566E+04  2548   0.269E+03</span><br><span class="line">DAV:   2     0.163549324393E+02   -0.36374E+03   -0.35588E+03  2548   0.438E+02</span><br><span class="line">DAV:   3    -0.154087935417E+02   -0.31764E+02   -0.30239E+02  2816   0.186E+02</span><br><span class="line">DAV:   4    -0.171245615883E+02   -0.17158E+01   -0.16227E+01  2856   0.463E+01</span><br><span class="line">DAV:   5    -0.171794690835E+02   -0.54907E-01   -0.54864E-01  2954   0.690E+00    0.146E+01</span><br><span class="line">DAV:   6    -0.156158003013E+02    0.15637E+01   -0.42034E+01  2712   0.133E+02    0.829E+00</span><br><span class="line">DAV:   7    -0.140078760986E+02    0.16079E+01   -0.79564E+00  2992   0.596E+01    0.790E-01</span><br><span class="line">DAV:   8    -0.140167702165E+02   -0.88941E-02   -0.53048E-01  3968   0.226E+01    0.122E+00</span><br><span class="line">DAV:   9    -0.140083290175E+02    0.84412E-02   -0.45257E-01  3848   0.291E+01    0.104E+00</span><br><span class="line">DAV:  10    -0.139869448329E+02    0.21384E-01   -0.20408E-01  4800   0.187E+01    0.615E-01</span><br><span class="line">DAV:  11    -0.139810722283E+02    0.58726E-02   -0.60166E-02  4016   0.780E+00    0.113E-01</span><br><span class="line">DAV:  12    -0.139806486192E+02    0.42361E-03   -0.10641E-02  3786   0.272E+00    0.980E-02</span><br><span class="line">DAV:  13    -0.139810968626E+02   -0.44824E-03   -0.87951E-03  4868   0.367E+00    0.844E-02</span><br><span class="line">DAV:  14    -0.139803135502E+02    0.78331E-03   -0.42901E-03  4920   0.238E+00    0.308E-02</span><br><span class="line">DAV:  15    -0.139802543403E+02    0.59210E-04   -0.32281E-04  3540   0.324E-01    0.182E-02</span><br><span class="line">DAV:  16    -0.139803209356E+02   -0.66595E-04   -0.83429E-04  4558   0.937E-01    0.301E-02</span><br><span class="line">DAV:  17    -0.139803228923E+02   -0.19567E-05   -0.15361E-04  3074   0.264E-01    0.168E-02</span><br><span class="line">DAV:  18    -0.139803417113E+02   -0.18819E-04   -0.36368E-04  4750   0.744E-01    0.954E-03</span><br><span class="line">DAV:  19    -0.139803412500E+02    0.46126E-06   -0.10659E-04  2728   0.404E-01    0.517E-03</span><br><span class="line">DAV:  20    -0.139803676358E+02   -0.26386E-04   -0.80023E-05  3638   0.357E-01    0.818E-03</span><br><span class="line">DAV:  21    -0.139803787022E+02   -0.11066E-04   -0.13797E-05  3336   0.920E-02    0.101E-02</span><br><span class="line">DAV:  22    -0.139803765945E+02    0.21077E-05   -0.39937E-05  2614   0.265E-01    0.222E-03</span><br><span class="line">DAV:  23    -0.139803888096E+02   -0.12215E-04   -0.60877E-05  2528   0.297E-01    0.725E-03</span><br><span class="line">DAV:  24    -0.139803907613E+02   -0.19517E-05   -0.71066E-06  3156   0.553E-02    0.611E-03</span><br><span class="line">DAV:  25    -0.139803916036E+02   -0.84239E-06   -0.13171E-06  1634   0.198E-02</span><br><span class="line">   1 F= -.13980392E+02 E0= -.13976732E+02  d E =-.139804E+02</span><br><span class="line">       N       E                     dE             d eps       ncg     rms          rms(c)</span><br><span class="line">DAV:   1    -0.139807447433E+02   -0.35398E-03    0.14111E+02  2590   0.632E+00    0.528E-03</span><br><span class="line">DAV:   2    -0.139804678790E+02    0.27686E-03   -0.17889E-04  4964   0.563E-01    0.155E-02</span><br><span class="line">DAV:   3    -0.139804572701E+02    0.10609E-04   -0.99595E-05  4260   0.455E-01    0.347E-03</span><br><span class="line">DAV:   4    -0.139804576704E+02   -0.40025E-06   -0.38794E-06  2444   0.252E-02</span><br><span class="line">   2 F= -.13980458E+02 E0= -.13976804E+02  d E =-.660667E-04</span><br><span class="line">       N       E                     dE             d eps       ncg     rms          rms(c)</span><br><span class="line">DAV:   1    -0.139806303531E+02   -0.17308E-03    0.10590E+01  2646   0.165E+00    0.137E-02</span><br><span class="line">DAV:   2    -0.139806282211E+02    0.21320E-05   -0.51586E-04  3892   0.441E-01    0.161E-02</span><br><span class="line">DAV:   3    -0.139806267938E+02    0.14273E-05   -0.86921E-05  4092   0.433E-01    0.112E-02</span><br><span class="line">DAV:   4    -0.139806245851E+02    0.22087E-05   -0.18757E-05  2156   0.193E-01    0.871E-03</span><br><span class="line">DAV:   5    -0.139806244737E+02    0.11138E-06   -0.11052E-05  3344   0.135E-01    0.639E-03</span><br><span class="line">DAV:   6    -0.139806241801E+02    0.29361E-06   -0.44497E-06  1850   0.106E-01</span><br><span class="line">   3 F= -.13980624E+02 E0= -.13976988E+02  d E =-.232576E-03</span><br><span class="line">       N       E                     dE             d eps       ncg     rms          rms(c)</span><br><span class="line">DAV:   1    -0.139806399034E+02   -0.15430E-04    0.10673E+02  2632   0.655E+00    0.273E-02</span><br><span class="line">DAV:   2    -0.139808756284E+02   -0.23573E-03   -0.22093E-03  3886   0.102E+00    0.353E-02</span><br><span class="line">DAV:   3    -0.139808651090E+02    0.10519E-04   -0.43844E-04  4364   0.978E-01    0.208E-02</span><br><span class="line">DAV:   4    -0.139808558492E+02    0.92598E-05   -0.82890E-05  3866   0.380E-01    0.163E-02</span><br><span class="line">DAV:   5    -0.139808537696E+02    0.20796E-05   -0.22746E-05  3796   0.195E-01    0.113E-02</span><br><span class="line">DAV:   6    -0.139808525623E+02    0.12073E-05   -0.15366E-05  3678   0.171E-01    0.403E-03</span><br><span class="line">DAV:   7    -0.139808519218E+02    0.64052E-06   -0.31561E-06  1528   0.772E-02</span><br><span class="line">   4 F= -.13980852E+02 E0= -.13977253E+02  d E =-.460318E-03</span><br><span class="line">       N       E                     dE             d eps       ncg     rms          rms(c)</span><br><span class="line">DAV:   1    -0.139800417341E+02    0.81083E-03    0.23560E+01  2630   0.588E+00    0.573E-02</span><br><span class="line">DAV:   2    -0.139809885034E+02   -0.94677E-03   -0.91190E-03  3890   0.208E+00    0.745E-02</span><br><span class="line">DAV:   3    -0.139809389586E+02    0.49545E-04   -0.17575E-03  4372   0.196E+00    0.428E-02</span><br><span class="line">DAV:   4    -0.139809007116E+02    0.38247E-04   -0.35205E-04  4684   0.779E-01    0.339E-02</span><br><span class="line">DAV:   5    -0.139808904102E+02    0.10301E-04   -0.81050E-05  4124   0.377E-01    0.239E-02</span><br><span class="line">DAV:   6    -0.139808824251E+02    0.79850E-05   -0.67930E-05  4464   0.342E-01    0.861E-03</span><br><span class="line">DAV:   7    -0.139808804209E+02    0.20042E-05   -0.13063E-05  2516   0.156E-01    0.364E-03</span><br><span class="line">DAV:   8    -0.139808803022E+02    0.11871E-06   -0.29028E-06  1874   0.341E-02</span><br><span class="line">   5 F= -.13980880E+02 E0= -.13977356E+02  d E =-.488699E-03</span><br><span class="line">       N       E                     dE             d eps       ncg     rms          rms(c)</span><br><span class="line">DAV:   1    -0.139807672910E+02    0.11313E-03    0.15468E+02  2630   0.858E+00    0.205E-02</span><br><span class="line">DAV:   2    -0.139809519135E+02   -0.18462E-03   -0.16290E-03  3860   0.606E-01    0.224E-02</span><br><span class="line">DAV:   3    -0.139809495045E+02    0.24089E-05   -0.16101E-04  3760   0.572E-01    0.195E-02</span><br><span class="line">DAV:   4    -0.139809446950E+02    0.48095E-05   -0.34715E-05  3338   0.266E-01    0.149E-02</span><br><span class="line">DAV:   5    -0.139809410051E+02    0.36899E-05   -0.17275E-05  3888   0.130E-01    0.678E-03</span><br><span class="line">DAV:   6    -0.139809401472E+02    0.85792E-06   -0.69054E-06  2716   0.164E-01</span><br><span class="line">   6 F= -.13980940E+02 E0= -.13977383E+02  d E =-.548544E-03</span><br><span class="line">       N       E                     dE             d eps       ncg     rms          rms(c)</span><br><span class="line">DAV:   1    -0.139808959432E+02    0.45062E-04    0.81868E+01  2640   0.491E+00    0.921E-03</span><br><span class="line">DAV:   2    -0.139810234583E+02   -0.12752E-03   -0.40347E-04  3868   0.335E-01    0.124E-02</span><br><span class="line">DAV:   3    -0.139810222522E+02    0.12061E-05   -0.37434E-05  3890   0.257E-01    0.934E-03</span><br><span class="line">DAV:   4    -0.139810216716E+02    0.58055E-06   -0.56497E-06  1910   0.105E-01</span><br><span class="line">   7 F= -.13981022E+02 E0= -.13977454E+02  d E =-.815244E-04</span><br><span class="line">       N       E                     dE             d eps       ncg     rms          rms(c)</span><br><span class="line">DAV:   1    -0.139809168510E+02    0.10540E-03    0.16544E+02  2640   0.100E+01    0.295E-02</span><br><span class="line">DAV:   2    -0.139812498696E+02   -0.33302E-03   -0.35344E-03  3874   0.942E-01    0.353E-02</span><br><span class="line">DAV:   3    -0.139812400259E+02    0.98437E-05   -0.31428E-04  3728   0.768E-01    0.285E-02</span><br><span class="line">DAV:   4    -0.139812339348E+02    0.60911E-05   -0.66313E-05  3954   0.364E-01    0.240E-02</span><br><span class="line">DAV:   5    -0.139812229797E+02    0.10955E-04   -0.53085E-05  4306   0.249E-01    0.134E-02</span><br><span class="line">DAV:   6    -0.139812204144E+02    0.25653E-05   -0.20199E-05  3228   0.260E-01    0.363E-03</span><br><span class="line">DAV:   7    -0.139812202373E+02    0.17704E-06   -0.19687E-06  1482   0.408E-02</span><br><span class="line">   8 F= -.13981220E+02 E0= -.13977623E+02  d E =-.280090E-03</span><br><span class="line">       N       E                     dE             d eps       ncg     rms          rms(c)</span><br><span class="line">DAV:   1    -0.139799374972E+02    0.12829E-02    0.13429E+02  2638   0.119E+01    0.609E-02</span><br><span class="line">DAV:   2    -0.139815536956E+02   -0.16162E-02   -0.15321E-02  3874   0.237E+00    0.834E-02</span><br><span class="line">DAV:   3    -0.139814840776E+02    0.69618E-04   -0.19373E-03  4340   0.194E+00    0.553E-02</span><br><span class="line">DAV:   4    -0.139814504163E+02    0.33661E-04   -0.33985E-04  4524   0.775E-01    0.477E-02</span><br><span class="line">DAV:   5    -0.139814168287E+02    0.33588E-04   -0.15051E-04  4446   0.480E-01    0.325E-02</span><br><span class="line">DAV:   6    -0.139813975448E+02    0.19284E-04   -0.12765E-04  4566   0.480E-01    0.853E-03</span><br><span class="line">DAV:   7    -0.139813962132E+02    0.13316E-05   -0.15668E-05  3464   0.152E-01    0.507E-03</span><br><span class="line">DAV:   8    -0.139813960169E+02    0.19635E-06   -0.22934E-06  1728   0.311E-02</span><br><span class="line">   9 F= -.13981396E+02 E0= -.13977735E+02  d E =-.455870E-03</span><br><span class="line">       N       E                     dE             d eps       ncg     rms          rms(c)</span><br><span class="line">DAV:   1    -0.139815084243E+02   -0.11221E-03    0.83969E+01  2670   0.421E+00    0.434E-03</span><br><span class="line">DAV:   2    -0.139813984003E+02    0.11002E-03   -0.73291E-05  3840   0.104E-01    0.437E-03</span><br><span class="line">DAV:   3    -0.139813981891E+02    0.21124E-06   -0.11427E-06  1510   0.490E-02</span><br><span class="line">  10 F= -.13981398E+02 E0= -.13977729E+02  d E =-.217219E-05</span><br><span class="line">       N       E                     dE             d eps       ncg     rms          rms(c)</span><br><span class="line">DAV:   1    -0.139815087603E+02   -0.11036E-03    0.15888E+02  2670   0.681E+00    0.323E-03</span><br><span class="line">DAV:   2    -0.139813984696E+02    0.11029E-03   -0.26471E-05  2428   0.210E-01    0.588E-03</span><br><span class="line">DAV:   3    -0.139813976417E+02    0.82788E-06   -0.27049E-05  3780   0.204E-01    0.141E-03</span><br><span class="line">DAV:   4    -0.139813978006E+02   -0.15885E-06   -0.17146E-06  1590   0.262E-02</span><br><span class="line">  11 F= -.13981398E+02 E0= -.13977732E+02  d E =-.178370E-05</span><br></pre></td></tr></table></figure>
<p>计算时间：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">General timing and accounting informations for this job:</span><br><span class="line">========================================================</span><br><span class="line"></span><br><span class="line">                 Total CPU time used (sec):       93.113</span><br><span class="line">                           User time (sec):       87.076</span><br><span class="line">                         System time (sec):        6.036</span><br><span class="line">                        Elapsed time (sec):       94.073</span><br><span class="line"></span><br><span class="line">                  Maximum memory used (kb):      126136.</span><br><span class="line">                  Average memory used (kb):          N/A</span><br><span class="line"></span><br><span class="line">                         Minor page faults:        11497</span><br><span class="line">                         Major page faults:          687</span><br><span class="line">                Voluntary context switches:         1456</span><br></pre></td></tr></table></figure>
<p>能量信息：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">[ctan@baifq-hpc141 primitive-slab-opt-2]$ grep <span class="string">&#x27;  without&#x27;</span> OUTCAR</span><br><span class="line">  energy  without entropy=      -13.96941183  energy(sigma-&gt;0) =      -13.97673168</span><br><span class="line">  energy  without entropy=      -13.96949582  energy(sigma-&gt;0) =      -13.97680372</span><br><span class="line">  energy  without entropy=      -13.96971572  energy(sigma-&gt;0) =      -13.97698803</span><br><span class="line">  energy  without entropy=      -13.97005607  energy(sigma-&gt;0) =      -13.97725330</span><br><span class="line">  energy  without entropy=      -13.97030617  energy(sigma-&gt;0) =      -13.97735559</span><br><span class="line">  energy  without entropy=      -13.97026927  energy(sigma-&gt;0) =      -13.97738319</span><br><span class="line">  energy  without entropy=      -13.97031853  energy(sigma-&gt;0) =      -13.97745396</span><br><span class="line">  energy  without entropy=      -13.97042910  energy(sigma-&gt;0) =      -13.97762319</span><br><span class="line">  energy  without entropy=      -13.97041285  energy(sigma-&gt;0) =      -13.97773496</span><br><span class="line">  energy  without entropy=      -13.97039032  energy(sigma-&gt;0) =      -13.97772890</span><br><span class="line">  energy  without entropy=      -13.97040171  energy(sigma-&gt;0) =      -13.97773244</span><br></pre></td></tr></table></figure>
<p>对比一下发现，正如wiki所说，<code>IBRION = 1</code>适合初始结构较好的情况，<code>IBRION - 2</code>的适用性更广，更可靠，尽管<code>IBRION = 2</code>
的<code>POTIM</code>更大，但所用时间更长。二者最终的能量相差不大</p>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2025/04/27/%E7%A7%91%E7%A0%94/VASP/Starry%20Sky/Cu(111)%E6%99%B6%E9%9D%A2%E7%9A%84%E4%BC%98%E5%8C%96%E8%AE%A1%E7%AE%97/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2025/04/23/%E7%A7%91%E7%A0%94/VASP/Starry%20Sky/Cu(111)%E7%9A%84%E5%8D%95%E7%82%B9%E8%AE%A1%E7%AE%97/"
                            aria-label=": Cu(111) slab模型的单点计算"
                        >
                            Cu(111) slab模型的单点计算
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2025-04-23T10:48:00+08:00">
	
		    Apr 23, 2025
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/all-categories/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%9A%84%E7%A7%91%E7%A0%94%E4%B9%8B%E6%97%85/">从零开始的科研之旅</a>, <a class="category-link" href="/all-categories/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%9A%84%E7%A7%91%E7%A0%94%E4%B9%8B%E6%97%85/VASP/">VASP</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <p>首先对Cu单胞进行结构优化（bulk计算），然后使用优化的结构进行切割，再进行计算（由于晶胞已经优化过，所以本次计算其实是单点计算）。大师兄提到：</p>
<blockquote>
<p>Cu(111) slab
模型（POSCAR）的制作流程（复习一下）。<strong>注意：</strong>前面我们用的是Conventional
cell，下面用的是Primitive Cell。
一般来说用<code>Conventional cell</code>，
FCC的金属可以用<code>Primitive Cell</code>
但对于其他体系，通过<code>Primitive Cell</code>切出来表面模型有问题</p>
</blockquote>
<p>我准备两种都验证一下。</p>
<h2 id="使用conventional-cell建立slab模型">使用Conventional
Cell建立slab模型</h2>
<h3 id="切割结构">切割结构</h3>
<p>将bulk计算完毕的CONTCAR文件用Vesta打开，再转换为<code>.cif</code>文件使用Materials
Studio打开</p>
<ul>
<li>Step1：Build-Surface-Cleave Surface</li>
</ul>
<p><code>Angstrom</code>是单位<code>埃</code>，需要切割的晶面是(111)，相应的平面方程为<span
class="math inline"><em>x</em> + <em>y</em> + <em>z</em> − 1 = 0</span>，使用点到直线的距离公式即可求出晶面间距离，，即厚度<code>thickness</code></p>
<p>PS：之前<code>111</code>晶面是啥都给整忘了，算个点到直线的距离也能算错，真该抽自己两巴掌回去恶补<code>高等数学</code>😭</p>
<p>以下是来自维基百科的关于米勒指数以及<code>111</code>晶面的介绍，很形象了</p>
<figure>
<img
src="./Cu(111)%E7%9A%84%E5%8D%95%E7%82%B9%E8%AE%A1%E7%AE%97/Indices_miller_plan_exemple_cube.png"
alt="米勒指数以及111晶面" />
<figcaption aria-hidden="true">米勒指数以及111晶面</figcaption>
</figure>
<figure>
<img src="./Cu(111)%E7%9A%84%E5%8D%95%E7%82%B9%E8%AE%A1%E7%AE%97/1.png"
alt="GeoGebra计算器" />
<figcaption aria-hidden="true">GeoGebra计算器</figcaption>
</figure>
<p>平面ABC为：<span
class="math inline"><em>x</em> + <em>y</em> + <em>z</em> − 1 = 0</span>，点D为(1,1,0)</p>
<p>算一下厚度： <span class="math display">$$
d=\dfrac{|Ax_0+By_0+Cz_0|}{\sqrt{A^2+B^2+C^2}}=\dfrac{1}{\sqrt{3}}a\approx
\dfrac{1}{\sqrt{3}}\times 3.63468 \approx 2.0984
$$</span> <img
src="./Cu(111)%E7%9A%84%E5%8D%95%E7%82%B9%E8%AE%A1%E7%AE%97/image-20250426174733986.png"
alt="Cleave Surface in Materials Studio" /></p>
<p>在切割晶面时，<code>thickness</code>设置为4.0 (<span
class="math inline">4.0 = 1.0 × 4</span>)，即四倍的晶胞参数、四层原子，按一下<code>TAB</code>，软件软件会自动计算四层原子的真是厚度（单位：Angstrom埃），大约是<span
class="math inline">8.394 ≈ 4 × 2.0984</span>，这与我们手动计算的晶面间距离2.0984的四倍相符</p>
<ul>
<li>Step2：添加真空层，Build-Crystal-Build vacuum slab-Vacuum
orientation：C</li>
</ul>
<figure>
<img
src="./Cu(111)%E7%9A%84%E5%8D%95%E7%82%B9%E8%AE%A1%E7%AE%97/image-20250423111821857.png"
alt="添加真空层" />
<figcaption aria-hidden="true">添加真空层</figcaption>
</figure>
<ul>
<li>Step3：右键-lattice parameters</li>
</ul>
<figure>
<img
src="./Cu(111)%E7%9A%84%E5%8D%95%E7%82%B9%E8%AE%A1%E7%AE%97/image-20250423110528280.png"
alt="设置Z轴方向为真空层" />
<figcaption aria-hidden="true">设置Z轴方向为真空层</figcaption>
</figure>
<p>导出为<code>.cif</code>，vesta打开转换为<code>POSCAR</code>,</p>
<p><code>INCAR</code>如下</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">System = Cu-conventional-slab</span><br><span class="line">ISMEAR = 1</span><br><span class="line">SIGMA = 0.1</span><br><span class="line">ALGO = Fast</span><br><span class="line">ENCUT = 450 # the system is too huge to adopt huge ENCUT</span><br><span class="line">EDIFF = 1E-5</span><br><span class="line">LDIPOL = .TRUE.</span><br><span class="line">IDIPOL = 3</span><br><span class="line">NWRITE = 0</span><br><span class="line">LWAVE = .FALSE.</span><br><span class="line">LCHARG = .FALSE.</span><br><span class="line">NCORE = 20</span><br></pre></td></tr></table></figure>
<p>Slab模型虽然是代表表面，但是实际上在z方向是固体-真空-固体-真空-…的交替。如果我们建立的Slab模型在z方向是非对称的，模型就会产生一个沿z方向的偶极。偶极会产生静电势，静电势接着会影响模型的镜像（周期性边界条件）。最后算出来的模型的总能量和力与真实情况是不相符的。因此我们需要方法去矫正这种虚假的静电影响。</p>
<p>一种常用的方法就是偶极矫正，在真空部分加入一个超窄的但是方向相反的偶极。这样一来，固体模型产生的偶极和真空中的偶极就会相互抵消。模型和其镜像之间的静电势影响就会抵消</p>
<p>微调<code>KPOINTS</code></p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">K-POINTS</span><br><span class="line"> 0</span><br><span class="line">Gamma</span><br><span class="line">  13 13 1</span><br><span class="line">  0 0 0</span><br></pre></td></tr></table></figure>
<h3 id="计算结果">计算结果</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[ctan@baifq-hpc141 Cu-conventional-slab]$ grep <span class="string">&#x27;  without&#x27;</span> OUTCAR</span><br><span class="line">  energy  without entropy=      -55.91176854  energy(sigma-&gt;0) =      -55.91397643</span><br></pre></td></tr></table></figure>
<p>PS：最近学迷糊了，关于<code>收敛</code>脑海中有一个极其不正且的理解</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">[ctan@baifq-hpc141 bulk-calc]$ grep accuracy OUTCAR</span><br><span class="line"> reached required accuracy - stopping structural energy minimisation</span><br><span class="line">[ctan@baifq-hpc141 bulk-calc]$ <span class="built_in">cat</span> OSZICAR</span><br><span class="line">       N       E                     dE             d eps       ncg     rms          rms(c)</span><br><span class="line">DAV:   1     0.103476848532E+03    0.10348E+03   -0.27847E+04  6720   0.246E+03</span><br><span class="line">DAV:   2    -0.180387697818E+02   -0.12152E+03   -0.12091E+03  7280   0.155E+02</span><br><span class="line">DAV:   3    -0.185227503579E+02   -0.48398E+00   -0.48396E+00 10160   0.132E+01</span><br><span class="line">DAV:   4    -0.185240376489E+02   -0.12873E-02   -0.12873E-02  8200   0.464E-01</span><br><span class="line">DAV:   5    -0.185240414620E+02   -0.38131E-05   -0.38134E-05 10480   0.143E-02    0.154E+01</span><br><span class="line">DAV:   6    -0.164394189736E+02    0.20846E+01   -0.72731E+01  6800   0.881E+01    0.783E+00</span><br><span class="line">DAV:   7    -0.149577606472E+02    0.14817E+01   -0.11165E+01  6720   0.344E+01    0.111E+00</span><br><span class="line">DAV:   8    -0.149148685722E+02    0.42892E-01   -0.18431E-02  7280   0.139E+00    0.620E-01</span><br><span class="line">DAV:   9    -0.149081819010E+02    0.66867E-02   -0.51836E-02  8440   0.220E+00    0.636E-02</span><br><span class="line">DAV:  10    -0.149081753161E+02    0.65849E-05   -0.22202E-04  9000   0.149E-01    0.115E-02</span><br><span class="line">DAV:  11    -0.149081715196E+02    0.37964E-05   -0.16862E-06  8520   0.968E-03    0.844E-04</span><br><span class="line">DAV:  12    -0.149081716052E+02   -0.85577E-07   -0.88627E-08  4640   0.248E-03</span><br><span class="line">   1 F= -.14908172E+02 E0= -.14905377E+02  d E =-.149082E+02</span><br><span class="line">       N       E                     dE             d eps       ncg     rms          rms(c)</span><br><span class="line">DAV:   1    -0.149363274123E+02   -0.28156E-01   -0.51946E-01  6720   0.830E+00    0.131E+00</span><br><span class="line">DAV:   2    -0.149199449776E+02    0.16382E-01   -0.41291E-01  6720   0.646E+00    0.538E-01</span><br><span class="line">DAV:   3    -0.149119014518E+02    0.80435E-02   -0.68998E-02  6720   0.271E+00    0.192E-01</span><br><span class="line">DAV:   4    -0.149112107699E+02    0.69068E-03   -0.11896E-03  9800   0.216E-01    0.117E-02</span><br><span class="line">DAV:   5    -0.149112123403E+02   -0.15704E-05   -0.80430E-06  7320   0.267E-02    0.594E-03</span><br><span class="line">DAV:   6    -0.149112142891E+02   -0.19488E-05   -0.13229E-06  4760   0.997E-03    0.128E-04</span><br><span class="line">DAV:   7    -0.149112142406E+02    0.48522E-07   -0.22610E-08  3560   0.101E-03</span><br><span class="line">   2 F= -.14911214E+02 E0= -.14908447E+02  d E =-.304264E-02</span><br><span class="line">       N       E                     dE             d eps       ncg     rms          rms(c)</span><br><span class="line">DAV:   1    -0.150389301673E+02   -0.12772E+00   -0.26022E+00  6720   0.187E+01    0.290E+00</span><br><span class="line">DAV:   2    -0.149566578541E+02    0.82272E-01   -0.20265E+00  6720   0.143E+01    0.119E+00</span><br><span class="line">DAV:   3    -0.149175257623E+02    0.39132E-01   -0.34317E-01  6720   0.604E+00    0.437E-01</span><br><span class="line">DAV:   4    -0.149140056079E+02    0.35202E-02   -0.72028E-03 10080   0.565E-01    0.378E-02</span><br><span class="line">DAV:   5    -0.149139977907E+02    0.78172E-05   -0.11528E-04  7840   0.108E-01    0.134E-02</span><br><span class="line">DAV:   6    -0.149140005388E+02   -0.27480E-05   -0.66656E-06  7680   0.220E-02    0.371E-04</span><br><span class="line">DAV:   7    -0.149140005655E+02   -0.26792E-07   -0.64306E-08  3960   0.196E-03</span><br><span class="line">   3 F= -.14914001E+02 E0= -.14911298E+02  d E =-.582896E-02</span><br></pre></td></tr></table></figure>
<p>这是上一节里的关于bulk计算（结构优化）的部分内容，可以看到，<code>reached required accuracy - stopping structural energy minimisation</code>——离子步已经收敛，在之后的<code>OSZICAR</code>里，电子步迭代最多7步，并未超过设置的最大电子步数目。因此对于bulk计算，==电子步和离子步都收敛==</p>
<p>而对于slab模型的单点计算，我也傻傻的这么做😢</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">[ctan@baifq-hpc141 conventional-slab-static]$ grep accuracy OUTCAR</span><br><span class="line">[ctan@baifq-hpc141 conventional-slab-static]$ <span class="built_in">cat</span> OSZICAR</span><br><span class="line">       N       E                     dE             d eps       ncg     rms          rms(c)</span><br><span class="line">DAV:   1     0.178654188479E+04    0.17865E+04   -0.88940E+04 10388   0.264E+03</span><br><span class="line">DAV:   2     0.200572973408E+03   -0.15860E+04   -0.15355E+04 10388   0.519E+02</span><br><span class="line">DAV:   3    -0.535557174826E+02   -0.25413E+03   -0.23428E+03 10438   0.249E+02</span><br><span class="line">DAV:   4    -0.683234131101E+02   -0.14768E+02   -0.14274E+02 11572   0.815E+01</span><br><span class="line">DAV:   5    -0.687193157556E+02   -0.39590E+00   -0.39405E+00 12400   0.117E+01    0.292E+01</span><br><span class="line">RMM:   6    -0.611494529970E+02    0.75699E+01   -0.15131E+02 11054   0.104E+02    0.161E+01</span><br><span class="line">RMM:   7    -0.558685188476E+02    0.52809E+01   -0.32335E+01 10772   0.530E+01    0.226E+00</span><br><span class="line">RMM:   8    -0.559296519539E+02   -0.61133E-01   -0.22789E+00 11552   0.614E+00    0.111E+00</span><br><span class="line">RMM:   9    -0.559488617332E+02   -0.19210E-01   -0.37622E-01 11539   0.361E+00    0.509E-01</span><br><span class="line">RMM:  10    -0.559454147061E+02    0.34470E-02   -0.13294E-01 12844   0.193E+00    0.214E-01</span><br><span class="line">RMM:  11    -0.559437301097E+02    0.16846E-02   -0.22655E-02 12875   0.691E-01    0.208E-01</span><br><span class="line">RMM:  12    -0.559413428432E+02    0.23873E-02   -0.55145E-03 11960   0.354E-01    0.586E-02</span><br><span class="line">RMM:  13    -0.559414638149E+02   -0.12097E-03   -0.17465E-03 13023   0.187E-01    0.323E-02</span><br><span class="line">RMM:  14    -0.559411451635E+02    0.31865E-03   -0.83089E-04 11756   0.134E-01    0.373E-02</span><br><span class="line">RMM:  15    -0.559412390394E+02   -0.93876E-04   -0.47990E-04 11372   0.168E-01    0.284E-02</span><br><span class="line">RMM:  16    -0.559414153722E+02   -0.17633E-03   -0.21175E-04 11475   0.107E-01    0.129E-02</span><br><span class="line">RMM:  17    -0.559414836424E+02   -0.68270E-04   -0.10022E-04 11751   0.526E-02    0.889E-03</span><br><span class="line">RMM:  18    -0.559415856898E+02   -0.10205E-03   -0.51724E-05 11898   0.366E-02    0.682E-03</span><br><span class="line">RMM:  19    -0.559416259149E+02   -0.40225E-04   -0.26297E-05 11504   0.350E-02    0.861E-03</span><br><span class="line">RMM:  20    -0.559416406670E+02   -0.14752E-04   -0.10748E-05 11263   0.208E-02    0.367E-03</span><br><span class="line">RMM:  21    -0.559416498741E+02   -0.92071E-05   -0.47420E-06  8911   0.102E-02    0.119E-03</span><br><span class="line">RMM:  22    -0.559416543655E+02   -0.44914E-05   -0.22030E-06  7155   0.977E-03    0.193E-03</span><br><span class="line">RMM:  23    -0.559416573370E+02   -0.29715E-05   -0.14726E-06  6702   0.894E-03    0.135E-03</span><br><span class="line">RMM:  24    -0.559416575122E+02   -0.17515E-06   -0.44209E-07  6318   0.507E-03</span><br><span class="line">   1 F= -.55941658E+02 E0= -.55944345E+02  d E =0.806296E-02</span><br></pre></td></tr></table></figure>
<p>不管怎么修改<code>ALGO</code>、<code>ENCUT</code>等参数，<code>grep accuracy OUTCAR</code>始终不返回<code>reached required accuracy - stopping structural energy minimisation</code>，后来我才意识到，这是==单点计算==，<code>NSW = 0</code>，并不会进行离子步迭代呀，所以我们只需关注电子步收敛即可，很明显电子步收敛，<code>OUTCAR</code>里的信息也可说明</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[ctan@baifq-hpc141 conventional-slab-static]$ grep abort OUTCAR</span><br><span class="line">------------------------ aborting loop because EDIFF is reached ----------------------------------------</span><br></pre></td></tr></table></figure>
<p><strong>This is definitely a stupid, stupid and stupid
mistake</strong>😭</p>
<p>就写到这，吃饭去了，待会还要回实验室</p>
<h2 id="使用primitive-cell">使用Primitive Cell</h2>
<p>使用<code>bulk计算</code>且收敛的<code>CONTCAR</code>进行slab模型的建立，操作还是类似的</p>
<p>值得注意的是，需要先==find
symmetry==，然后才能转换为<code>primitive cell</code></p>
<figure>
<img
src="./Cu(111)%E7%9A%84%E5%8D%95%E7%82%B9%E8%AE%A1%E7%AE%97/image-20250426191515563.png"
alt="降低对称性之前" />
<figcaption aria-hidden="true">降低对称性之前</figcaption>
</figure>
<figure>
<img
src="./Cu(111)%E7%9A%84%E5%8D%95%E7%82%B9%E8%AE%A1%E7%AE%97/image-20250426191902480.png"
alt="find symmetry" />
<figcaption aria-hidden="true">find symmetry</figcaption>
</figure>
<p>然后<code>impose symmetry</code>，接着再转换为<code>primitive cell</code>，然后建立slab模型</p>
<p><code>POSCAR</code>会有些不同</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">CONTCAR\(1\1\1)</span><br><span class="line">1.0</span><br><span class="line">        2.5701000690         0.0000000000         0.0000000000</span><br><span class="line">       -1.2850500345         2.2257719501         0.0000000000</span><br><span class="line">        0.0000000000         0.0000000000        21.2954006195</span><br><span class="line">   Cu</span><br><span class="line">    4</span><br><span class="line">Direct</span><br><span class="line">     0.000000000         0.000000000         0.000000000</span><br><span class="line">     0.666670000         0.333330000         0.098540000</span><br><span class="line">     0.333330000         0.666670000         0.197080000</span><br><span class="line">     0.000000000         0.000000000         0.295620000</span><br></pre></td></tr></table></figure>
<p>计算后的能量也有所不同：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">(base) storm@DESKTOP-HE4FQ8Q:~/my-learn/ex42/Cu-primitive-slab$ grep &#x27;  without&#x27; OUTCAR</span><br><span class="line">  energy  without entropy=      -13.97087892  energy(sigma-&gt;0) =      -13.97120814</span><br></pre></td></tr></table></figure>
<p>值得一提的是，在白老师的计算集群上运行时报错了(<code>vasp.6.4.2</code>)</p>
<p>如果截断能<code>ENCUT</code>过小可能报错<code>Error EDDDAV: Call to ZHEGV failed. Returncode = 7 1 8</code></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><span class="line">[ctan@baifq-hpc141 Cu-primmitive-slab]$ <span class="built_in">ls</span></span><br><span class="line">INCAR  KPOINTS  POSCAR  POTCAR</span><br><span class="line">[ctan@baifq-hpc141 Cu-primmitive-slab]$ clear</span><br><span class="line">[ctan@baifq-hpc141 Cu-primmitive-slab]$ sbatch vasp</span><br><span class="line">Submitted batch job 4321</span><br><span class="line">[ctan@baifq-hpc141 Cu-primmitive-slab]$ <span class="built_in">tail</span> -f OUTCAR</span><br><span class="line">--------------------------------------- Ionic step        1  -------------------------------------------</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">--------------------------------------- Iteration      1(   1)  ---------------------------------------</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    POTLOK:  cpu <span class="keyword">time</span>      0.0215: real <span class="keyword">time</span>      0.0258</span><br><span class="line">    SETDIJ:  cpu <span class="keyword">time</span>      0.0109: real <span class="keyword">time</span>      0.0118</span><br><span class="line">     EDDAV:  cpu <span class="keyword">time</span>      0.7451: real <span class="keyword">time</span>      0.7613</span><br><span class="line">       DOS:  cpu <span class="keyword">time</span>      0.0052: real <span class="keyword">time</span>      0.0060</span><br><span class="line">    --------------------------------------------</span><br><span class="line">      LOOP:  cpu <span class="keyword">time</span>      0.7826: real <span class="keyword">time</span>      0.8050</span><br><span class="line"></span><br><span class="line"> eigenvalue-minimisations  :  2548</span><br><span class="line"> total energy-change (2. order) : 0.3445715E+03  (-0.1837296E+04)</span><br><span class="line"> number of electron      44.0000000 magnetization</span><br><span class="line"> augmentation part       44.0000000 magnetization</span><br><span class="line"></span><br><span class="line"> DIPCOR: dipole corrections <span class="keyword">for</span> dipol</span><br><span class="line"> direction  3 min pos   155,</span><br><span class="line"> dipolmoment           0.000000      0.000000      0.000026 electrons x Angstroem</span><br><span class="line"> Tr[quadrupol]       -31.061780</span><br><span class="line"></span><br><span class="line"> energy correction <span class="keyword">for</span> charged system         0.000000 eV</span><br><span class="line"> dipol+quadrupol energy correction           -0.000000 eV</span><br><span class="line"> added-field ion interaction          0.001451 eV  (added to PSCEN)</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> Free energy of the ion-electron system (eV)</span><br><span class="line">  ---------------------------------------------------</span><br><span class="line">  alpha Z        PSCENC =        96.14159556</span><br><span class="line">  Ewald energy   TEWEN  =     16384.30326894</span><br><span class="line">  -Hartree energ DENC   =    -21746.47963692</span><br><span class="line">  -exchange      EXHF   =         0.00000000</span><br><span class="line">  -V(xc)+E(xc)   XCENC  =       182.01436818</span><br><span class="line">  PAW double counting   =      4912.82663951    -5336.19386850</span><br><span class="line">  entropy T*S    EENTRO =         0.00034874</span><br><span class="line">  eigenvalues    EBANDS =       288.07434016</span><br><span class="line">  atomic energy  EATOM  =      5563.88447798</span><br><span class="line">  Solvation  Ediel_sol  =         0.00000000</span><br><span class="line">  ---------------------------------------------------</span><br><span class="line">  free energy    TOTEN  =       344.57153365 eV</span><br><span class="line"></span><br><span class="line">  energy without entropy =      344.57118491  energy(sigma-&gt;0) =      344.57141740</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">--------------------------------------------------------------------------------------------------------</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">--------------------------------------- Iteration      1(   2)  ---------------------------------------</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> -----------------------------------------------------------------------------</span><br><span class="line">|                                                                             |</span><br><span class="line">|     EEEEEEE  RRRRRR   RRRRRR   OOOOOOO  RRRRRR      <span class="comment">###     ###     ###     |</span></span><br><span class="line">|     E        R     R  R     R  O     O  R     R     <span class="comment">###     ###     ###     |</span></span><br><span class="line">|     E        R     R  R     R  O     O  R     R     <span class="comment">###     ###     ###     |</span></span><br><span class="line">|     EEEEE    RRRRRR   RRRRRR   O     O  RRRRRR       <span class="comment">#       #       #      |</span></span><br><span class="line">|     E        R   R    R   R    O     O  R   R                               |</span><br><span class="line">|     E        R    R   R    R   O     O  R    R      <span class="comment">###     ###     ###     |</span></span><br><span class="line">|     EEEEEEE  R     R  R     R  OOOOOOO  R     R     <span class="comment">###     ###     ###     |</span></span><br><span class="line">|                                                                             |</span><br><span class="line">|     Error EDDDAV: Call to ZHEGV failed. Returncode = 7 1 8                  |</span><br><span class="line">|                                                                             |</span><br><span class="line">|       ----&gt;  I REFUSE TO CONTINUE WITH THIS SICK JOB ... BYE!!! &lt;----       |</span><br><span class="line">|                                                                             |</span><br><span class="line"> -----------------------------------------------------------------------------</span><br></pre></td></tr></table></figure>
<h3 id="小结">小结</h3>
<ul>
<li>此计算是在bulk计算的基础上(<strong>最优结构</strong>)进行的单点计算，计算时<strong>不能进行离子弛豫，不能进行离子步迭代</strong>，默认<code>NSW=0</code></li>
<li>不进行离子弛豫，那么自然不能设置离子步收敛条件，不能设置<code>EDIFFG</code></li>
<li>如果不报错运行但结果不收敛可试着增大电子步数<code>NSW</code>以及截断能<code>ENCUT</code></li>
</ul>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2025/04/23/%E7%A7%91%E7%A0%94/VASP/Starry%20Sky/Cu(111)%E7%9A%84%E5%8D%95%E7%82%B9%E8%AE%A1%E7%AE%97/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2025/04/23/%E7%A7%91%E7%A0%94/VASP/Starry%20Sky/Cu%E5%8D%95%E8%83%9E%E7%9A%84bulk%E8%AE%A1%E7%AE%97/"
                            aria-label=": Cu单胞的bulk计算"
                        >
                            Cu单胞的bulk计算
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2025-04-23T10:09:00+08:00">
	
		    Apr 23, 2025
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/all-categories/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%9A%84%E7%A7%91%E7%A0%94%E4%B9%8B%E6%97%85/">从零开始的科研之旅</a>, <a class="category-link" href="/all-categories/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%9A%84%E7%A7%91%E7%A0%94%E4%B9%8B%E6%97%85/VASP/">VASP</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <p>bulk计算，直译为“体相计算”，指的是模拟理想的三维无限大晶体（无表面、界面或缺陷，不模拟则体系太大算不动），利用
<strong>周期性边界条件</strong>
描述材料的体相性质，主要用于研究材料的本征物理化学性质（如晶格结构、电子能带、热力学稳定性等）</p>
<h2 id="准备poscar">准备POSCAR</h2>
<p>打开materials studio-File-Import-Structures-Metals-pure
metals-Cu.xsd，然后export为cif文件</p>
<p>用vesta打开Cu.cif文件，再export data，导出保存为POSCAR文件</p>
<h3 id="准备kpoints">准备KPOINTS</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">KPOINTS for Cu-concentional-cell-bulk-calc</span><br><span class="line">0</span><br><span class="line">Gamma</span><br><span class="line">13 13 13</span><br><span class="line">0 0 0</span><br></pre></td></tr></table></figure>
<h2 id="准备incar">准备INCAR</h2>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">SYSTEM = Cu-conventional-cell-bulk-calculation</span><br><span class="line">ISMEAR = 0</span><br><span class="line">SIGMA = 0.1</span><br><span class="line">ENCUT = 700</span><br><span class="line">ISIF = 3</span><br><span class="line">NSW = 200</span><br><span class="line">NELM = 200</span><br><span class="line">IBRION = 2</span><br><span class="line">POTIM = 0.1</span><br><span class="line">EDIFFG = -0.01</span><br><span class="line">ALGO = Normal</span><br><span class="line">EDIFF = 1E-6</span><br></pre></td></tr></table></figure>
<h2 id="提交任务">提交任务</h2>
<p>第一次使用超算平台，还算顺利，稍微折腾了一下终于能成功提交任务了</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[ctan@baifq-hpc141 Cu-statistic]$ sbatch vasp  <span class="comment">#vasp is the script</span></span><br><span class="line">[ctan@baifq-hpc141 Cu-statistic]$ grep accuracy OUTCAR</span><br><span class="line"> reached required accuracy - stopping structural energy minimisation <span class="comment">#calculation finished normally</span></span><br></pre></td></tr></table></figure>
<p>优化后的结构<code>CONTCAR</code>如下</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">Cu</span><br><span class="line">   1.00000000000000</span><br><span class="line">     3.6346781666386048    0.0000000000000000    0.0000000000000000</span><br><span class="line">     0.0000000000000000    3.6346781666386048    0.0000000000000000</span><br><span class="line">    -0.0000000000000000    0.0000000000000000    3.6346781666386048</span><br><span class="line">  Cu/0e71e558f37</span><br><span class="line">               4</span><br><span class="line">Direct</span><br><span class="line">  0.0000000000000000  0.0000000000000000 -0.0000000000000000</span><br><span class="line"> -0.0000000000000000  0.5000000000000000  0.5000000000000000</span><br><span class="line">  0.5000000000000000  0.0000000000000000  0.5000000000000000</span><br><span class="line">  0.5000000000000000  0.5000000000000000  0.0000000000000000</span><br><span class="line"></span><br><span class="line">  0.00000000E+00  0.00000000E+00  0.00000000E+00</span><br><span class="line">  0.00000000E+00  0.00000000E+00  0.00000000E+00</span><br><span class="line">  0.00000000E+00  0.00000000E+00  0.00000000E+00</span><br><span class="line">  0.00000000E+00  0.00000000E+00  0.00000000E+00</span><br></pre></td></tr></table></figure>
<p>其他信息：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">[ctan@baifq-hpc141 bulk-calc]$ <span class="built_in">cat</span> OSZICAR</span><br><span class="line">       N       E                     dE             d eps       ncg     rms          rms(c)</span><br><span class="line">DAV:   1     0.103476848532E+03    0.10348E+03   -0.27847E+04  6720   0.246E+03</span><br><span class="line">DAV:   2    -0.180387697818E+02   -0.12152E+03   -0.12091E+03  7280   0.155E+02</span><br><span class="line">DAV:   3    -0.185227503579E+02   -0.48398E+00   -0.48396E+00 10160   0.132E+01</span><br><span class="line">DAV:   4    -0.185240376489E+02   -0.12873E-02   -0.12873E-02  8200   0.464E-01</span><br><span class="line">DAV:   5    -0.185240414620E+02   -0.38131E-05   -0.38134E-05 10480   0.143E-02    0.154E+01</span><br><span class="line">DAV:   6    -0.164394189736E+02    0.20846E+01   -0.72731E+01  6800   0.881E+01    0.783E+00</span><br><span class="line">DAV:   7    -0.149577606472E+02    0.14817E+01   -0.11165E+01  6720   0.344E+01    0.111E+00</span><br><span class="line">DAV:   8    -0.149148685722E+02    0.42892E-01   -0.18431E-02  7280   0.139E+00    0.620E-01</span><br><span class="line">DAV:   9    -0.149081819010E+02    0.66867E-02   -0.51836E-02  8440   0.220E+00    0.636E-02</span><br><span class="line">DAV:  10    -0.149081753161E+02    0.65849E-05   -0.22202E-04  9000   0.149E-01    0.115E-02</span><br><span class="line">DAV:  11    -0.149081715196E+02    0.37964E-05   -0.16862E-06  8520   0.968E-03    0.844E-04</span><br><span class="line">DAV:  12    -0.149081716052E+02   -0.85577E-07   -0.88627E-08  4640   0.248E-03</span><br><span class="line">   1 F= -.14908172E+02 E0= -.14905377E+02  d E =-.149082E+02</span><br><span class="line">       N       E                     dE             d eps       ncg     rms          rms(c)</span><br><span class="line">DAV:   1    -0.149363274123E+02   -0.28156E-01   -0.51946E-01  6720   0.830E+00    0.131E+00</span><br><span class="line">DAV:   2    -0.149199449776E+02    0.16382E-01   -0.41291E-01  6720   0.646E+00    0.538E-01</span><br><span class="line">DAV:   3    -0.149119014518E+02    0.80435E-02   -0.68998E-02  6720   0.271E+00    0.192E-01</span><br><span class="line">DAV:   4    -0.149112107699E+02    0.69068E-03   -0.11896E-03  9800   0.216E-01    0.117E-02</span><br><span class="line">DAV:   5    -0.149112123403E+02   -0.15704E-05   -0.80430E-06  7320   0.267E-02    0.594E-03</span><br><span class="line">DAV:   6    -0.149112142891E+02   -0.19488E-05   -0.13229E-06  4760   0.997E-03    0.128E-04</span><br><span class="line">DAV:   7    -0.149112142406E+02    0.48522E-07   -0.22610E-08  3560   0.101E-03</span><br><span class="line">   2 F= -.14911214E+02 E0= -.14908447E+02  d E =-.304264E-02</span><br><span class="line">       N       E                     dE             d eps       ncg     rms          rms(c)</span><br><span class="line">DAV:   1    -0.150389301673E+02   -0.12772E+00   -0.26022E+00  6720   0.187E+01    0.290E+00</span><br><span class="line">DAV:   2    -0.149566578541E+02    0.82272E-01   -0.20265E+00  6720   0.143E+01    0.119E+00</span><br><span class="line">DAV:   3    -0.149175257623E+02    0.39132E-01   -0.34317E-01  6720   0.604E+00    0.437E-01</span><br><span class="line">DAV:   4    -0.149140056079E+02    0.35202E-02   -0.72028E-03 10080   0.565E-01    0.378E-02</span><br><span class="line">DAV:   5    -0.149139977907E+02    0.78172E-05   -0.11528E-04  7840   0.108E-01    0.134E-02</span><br><span class="line">DAV:   6    -0.149140005388E+02   -0.27480E-05   -0.66656E-06  7680   0.220E-02    0.371E-04</span><br><span class="line">DAV:   7    -0.149140005655E+02   -0.26792E-07   -0.64306E-08  3960   0.196E-03</span><br><span class="line">   3 F= -.14914001E+02 E0= -.14911298E+02  d E =-.582896E-02</span><br><span class="line">[ctan@baifq-hpc141 bulk-calc]$ grep accuracy OUTCAR</span><br><span class="line"> reached required accuracy - stopping structural energy minimisation</span><br><span class="line">[ctan@baifq-hpc141 bulk-calc]$ grep <span class="string">&#x27;  without&#x27;</span> OUTCAR</span><br><span class="line">  energy  without entropy=      -14.90258332  energy(sigma-&gt;0) =      -14.90537746</span><br><span class="line">  energy  without entropy=      -14.90568039  energy(sigma-&gt;0) =      -14.90844732</span><br><span class="line">  energy  without entropy=      -14.90859467  energy(sigma-&gt;0) =      -14.91129762</span><br></pre></td></tr></table></figure>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2025/04/23/%E7%A7%91%E7%A0%94/VASP/Starry%20Sky/Cu%E5%8D%95%E8%83%9E%E7%9A%84bulk%E8%AE%A1%E7%AE%97/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2025/04/19/%E7%A7%91%E7%A0%94/VASP/Starry%20Sky/%E4%B9%99%E9%86%87%E5%88%86%E5%AD%90/"
                            aria-label=": 乙醇分子的气相优化和振动频率计算"
                        >
                            乙醇分子的气相优化和振动频率计算
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2025-04-19T14:40:00+08:00">
	
		    Apr 19, 2025
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/all-categories/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%9A%84%E7%A7%91%E7%A0%94%E4%B9%8B%E6%97%85/">从零开始的科研之旅</a>, <a class="category-link" href="/all-categories/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%9A%84%E7%A7%91%E7%A0%94%E4%B9%8B%E6%97%85/VASP/">VASP</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h2 id="乙醇分子的结构优化">乙醇分子的结构优化</h2>
<h3 id="incar">INCAR</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">SYSTEM = ethanol</span><br><span class="line">ISMEAR = 0 #Gaussian ismear, for insulator</span><br><span class="line">SIGMA = 0.01</span><br><span class="line">NSW = 200</span><br><span class="line"></span><br><span class="line">IBRION = 2 #Optimizarion</span><br><span class="line">POTIM = 0.01 #a little conservative step</span><br></pre></td></tr></table></figure>
<h3 id="kpoints">KPOINTS</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">K-POINTS</span><br><span class="line">0</span><br><span class="line">Gamma</span><br><span class="line">1 1 1</span><br><span class="line">0 0 0</span><br></pre></td></tr></table></figure>
<h3 id="poscar">POSCAR</h3>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">Title</span><br><span class="line">1.0</span><br><span class="line">        4.8082499504         0.0000000000         0.0000000000</span><br><span class="line">        0.0000000000         4.8082499504         0.0000000000</span><br><span class="line">        0.0000000000         0.0000000000         4.8082499504</span><br><span class="line">    O    C    H</span><br><span class="line">    1    2    6</span><br><span class="line">Direct</span><br><span class="line">     0.747990456         0.438959082         0.500000000</span><br><span class="line">     0.508714210         0.577741385         0.500000000</span><br><span class="line">     0.269437963         0.438959082         0.500000000</span><br><span class="line">     0.900000025         0.568403268         0.500000000</span><br><span class="line">     0.508714210         0.689008479         0.307289552</span><br><span class="line">     0.508714210         0.689008479         0.692710448</span><br><span class="line">     0.100000016         0.583231948         0.500000000</span><br><span class="line">     0.257895302         0.310991525         0.318291476</span><br><span class="line">     0.257895302         0.310991525         0.681708524</span><br></pre></td></tr></table></figure>
<p>分子结构可以使用ChemDraw绘制，也可以去RSC的网站上下载https://www.chemspider.com/、</p>
<p>但是不管是下载的mol结构还是ChemDraw导出的mol结构，导入进Vesta里面发现都少了氢原子，笨比博主（😭）至今没找到解决方案，只能笨拙地把mol结构导入到GaussView里面，GaussView会自动补加上氢原子，然后再导入到Vesta中，再导出为POSCAR文件，当然理论上可以手动改POSCAR，不一定要使用可视化软件</p>
<h3 id="potcar">POTCAR</h3>
<p>使用基础的不带后缀的PBE赝势</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">cat</span> ../../potpaw_PBE.64/O/POTCAR ../../potpaw_PBE.64/C/POTCAR ../../potpaw_PBE.64/H/POTCAR &gt;&gt; POTCAR</span><br></pre></td></tr></table></figure>
<h3 id="对比优化前后">对比优化前后</h3>
<p>简单对比一下键长吧</p>
<ul>
<li>优化前
<ul>
<li>C-C bond: 1.33001(0) Å</li>
<li>O-H bond: 0.96000(0) Å</li>
</ul></li>
</ul>
<figure>
<img
src="./%E4%B9%99%E9%86%87%E5%88%86%E5%AD%90/image-20250419153648574.png"
alt="O-H bond" />
<figcaption aria-hidden="true">O-H bond</figcaption>
</figure>
<figure>
<img
src="./%E4%B9%99%E9%86%87%E5%88%86%E5%AD%90/image-20250419153711491.png"
alt="C-C bond" />
<figcaption aria-hidden="true">C-C bond</figcaption>
</figure>
<ul>
<li>优化后
<ul>
<li>C-C bond: 1.53893(0) Å</li>
<li>O-H bond: 0.96454(0) Å</li>
</ul></li>
</ul>
<figure>
<img
src="./%E4%B9%99%E9%86%87%E5%88%86%E5%AD%90/image-20250419153912122.png"
alt="O-H bond" />
<figcaption aria-hidden="true">O-H bond</figcaption>
</figure>
<figure>
<img
src="./%E4%B9%99%E9%86%87%E5%88%86%E5%AD%90/image-20250419153931409.png"
alt="C-C bond" />
<figcaption aria-hidden="true">C-C bond</figcaption>
</figure>
<h2 id="频率计算">频率计算</h2>
<p>频率计算的作用：</p>
<ul>
<li>确定结构是否稳定</li>
<li>看振动方式和大小，用来和实验对比</li>
<li>反应热，反应能垒，吸附能等的零点能矫正</li>
<li>确认过渡态(有一个振动的虚频)</li>
<li>热力学中计算<code>entropy</code>，用于计算化学势，微观动力学中的指前因子和反应能垒。</li>
</ul>
<h3 id="poscar-1">POSCAR</h3>
<p>使用先前优化的<code>CONTCAR</code>作为<code>POSCAR</code></p>
<h3 id="incar-1">INCAR</h3>
<p>修改一下IBRION，计算频率(<code>IBRION = 5</code>)而非结构优化(<code>IBRION = 2</code>)</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">SYSTEM = ethanol</span><br><span class="line">ISMEAR = 0 #Gaussian ismear, for insulator</span><br><span class="line">SIGMA = 0.01</span><br><span class="line">NSW = 1</span><br><span class="line">IBRION = 5 #freq calculation</span><br><span class="line">POTIM = 0.01 #a little conservative step</span><br><span class="line">EDIFF = 1E-8</span><br><span class="line">NFREE = 2</span><br></pre></td></tr></table></figure>
<h3 id="jmol分析频率">Jmol分析频率</h3>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">jmol OUTCAR</span><br></pre></td></tr></table></figure>
<p>Tools-AtomSetChooser-Frequencies</p>
<figure>
<img
src="./%E4%B9%99%E9%86%87%E5%88%86%E5%AD%90/image-20250420180231090.png"
alt="Jmol分析频率" />
<figcaption aria-hidden="true">Jmol分析频率</figcaption>
</figure>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2025/04/19/%E7%A7%91%E7%A0%94/VASP/Starry%20Sky/%E4%B9%99%E9%86%87%E5%88%86%E5%AD%90/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2025/04/18/%E7%A7%91%E7%A0%94/VASP/Starry%20Sky/%E6%B0%A7%E6%B0%94%E5%88%86%E5%AD%90/"
                            aria-label=": 氧气分子单点能的计算及结构优化"
                        >
                            氧气分子单点能的计算及结构优化
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2025-04-18T16:40:00+08:00">
	
		    Apr 18, 2025
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/all-categories/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%9A%84%E7%A7%91%E7%A0%94%E4%B9%8B%E6%97%85/">从零开始的科研之旅</a>, <a class="category-link" href="/all-categories/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%9A%84%E7%A7%91%E7%A0%94%E4%B9%8B%E6%97%85/VASP/">VASP</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <p>单点能计算又叫做静态计算，计算时不会优化结构</p>
<p>INCAR</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">SYSTEM = O</span><br><span class="line">ISMEAR = 0 #绝缘体系ISMEAR = 0</span><br><span class="line">SIGMA = 0.01</span><br><span class="line">ISPIN = 2 #氧气是顺磁性分子，ISPIN = 2开启自旋</span><br><span class="line">MAGMON = 2*2 #设置磁矩</span><br><span class="line"></span><br><span class="line">#IBRION = 2 确定计算过程中晶体结构如何变化的参数，不设置使默认IBRION = -1，IBRION =2为共轭梯度算法</span><br><span class="line">#NSW = 10  离子步10步</span><br></pre></td></tr></table></figure>
<p>POSCAR</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">O</span><br><span class="line">1.0</span><br><span class="line">7.5 0.0 0.0</span><br><span class="line">0.0 8.0 0.0</span><br><span class="line">0.0 0.0 8.9 #三斜的格子打破对称性，symmetry broken solution！！！</span><br><span class="line">O</span><br><span class="line">2</span><br><span class="line">Cartesian</span><br><span class="line">0.0 0.0 0.0</span><br><span class="line">0.0 0.0 1.2074</span><br></pre></td></tr></table></figure>
<p>KPOINTS</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">K-POINTS</span><br><span class="line"> 0</span><br><span class="line">Gamma</span><br><span class="line"> 1 1 1</span><br><span class="line"> 0 0 0</span><br></pre></td></tr></table></figure>
<p>运行<code>mpirun -n 8 vasp</code>，正常结束，OUTCAR的部分信息如下，显然，单点计算的结果并不可靠</p>
<p><span class="math inline"><em>α</em></span>电子部分</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">spin component 1</span><br><span class="line"></span><br><span class="line">k-point     1 :       0.0000    0.0000    0.0000</span><br><span class="line"> band No.  band energies     occupation</span><br><span class="line">     1     -32.9044      1.00000			#1σ轨道</span><br><span class="line">     2     -20.2474      1.00000			#2σ轨道</span><br><span class="line">     3     -13.3174      1.00000			#3σ轨道,能量应比1π和2π轨道更低，不合理</span><br><span class="line">     4     -13.3171      1.00000			#1π轨道</span><br><span class="line">     5     -13.2940      1.00000			#2π轨道，能量应与1π轨道相同，不合理</span><br><span class="line">     6      -6.5560      1.00000			#3π轨道</span><br><span class="line">     7      -6.5524      1.00000			#4π轨道</span><br><span class="line">     8      -0.3909      0.00000</span><br><span class="line">     9       1.1220      0.00000</span><br><span class="line">    10       1.5493      0.00000</span><br><span class="line">    11       1.7604      0.00000</span><br><span class="line">    12       2.0536      0.00000</span><br><span class="line">    13       2.0592      0.00000</span><br><span class="line">    14       2.4672      0.00000</span><br><span class="line">    15       3.1984      0.00000</span><br><span class="line">    16       3.6244      0.00000</span><br><span class="line">Fermi energy:        -6.4848556277</span><br></pre></td></tr></table></figure>
<p><span class="math inline"><em>β</em></span>电子，正常</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">spin component 2</span><br><span class="line"></span><br><span class="line">k-point     1 :       0.0000    0.0000    0.0000</span><br><span class="line"> band No.  band energies     occupation</span><br><span class="line">     1     -31.6977      1.00000</span><br><span class="line">     2     -18.4541      1.00000</span><br><span class="line">     3     -12.3485      1.00000</span><br><span class="line">     4     -11.4763      1.00000</span><br><span class="line">     5     -11.4760      1.00000</span><br><span class="line">     6      -4.2772      0.00000</span><br><span class="line">     7      -4.2742      0.00000</span><br><span class="line">     8      -0.2440      0.00000</span><br><span class="line">     9       1.4049      0.00000</span><br><span class="line">    10       1.6215      0.00000</span><br><span class="line">    11       1.9473      0.00000</span><br><span class="line">    12       2.1710      0.00000</span><br><span class="line">    13       2.2499      0.00000</span><br><span class="line">    14       2.5860      0.00000</span><br><span class="line">    15       3.5816      0.00000</span><br><span class="line">    16       3.8831      0.00000</span><br></pre></td></tr></table></figure>
<figure>
<img
src="./%E6%B0%A7%E6%B0%94%E5%88%86%E5%AD%90/imageedit_6_9897027704.png"
alt="Molecule orbital of oxygen" />
<figcaption aria-hidden="true">Molecule orbital of oxygen</figcaption>
</figure>
<p>对氧气进行结构优化，更改INCAR</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">SYSTEM = O</span><br><span class="line">ISMEAR = 0 #绝缘体系ISMEAR = 0</span><br><span class="line">SIGMA = 0.01</span><br><span class="line">ISPIN = 2 #氧气是顺磁性分子，ISPIN = 2开启自旋</span><br><span class="line">MAGMON = 2*2 #设置磁矩</span><br><span class="line"></span><br><span class="line">IBRION = 2 #确定计算过程中晶体结构如何变化的参数，不设置使默认IBRION = -1，IBRION =2为共轭梯度算法</span><br><span class="line">NSW = 10  #离子步10步</span><br></pre></td></tr></table></figure>
<p>计算后发现<span
class="math inline"><em>α</em></span>电子部分已经修正</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">spin component 1</span><br><span class="line"></span><br><span class="line">k-point     1 :       0.0000    0.0000    0.0000</span><br><span class="line"> band No.  band energies     occupation</span><br><span class="line">     1     -32.2878      1.00000			#1σ轨道</span><br><span class="line">     2     -20.4859      1.00000			#2σ轨道</span><br><span class="line">     3     -13.2238      1.00000			#3σ轨道，能量合理</span><br><span class="line">     4     -13.0591      1.00000</span><br><span class="line">     5     -13.0588      1.00000</span><br><span class="line">     6      -6.7814      1.00000</span><br><span class="line">     7      -6.7778      1.00000</span><br><span class="line">     8      -0.3857      0.00000</span><br><span class="line">     9       1.0213      0.00000</span><br><span class="line">    10       1.6177      0.00000</span><br><span class="line">    11       1.7818      0.00000</span><br><span class="line">    12       2.0634      0.00000</span><br><span class="line">    13       2.0746      0.00000</span><br><span class="line">    14       2.4643      0.00000</span><br><span class="line">    15       2.8035      0.00000</span><br><span class="line">    16       3.6409      0.00000</span><br><span class="line">Fermi energy:        -6.7122607632</span><br></pre></td></tr></table></figure>
<p>用VESTA打开优化好的结构(<code>CONTCAR</code>)可以查看键长</p>
<figure>
<img src="./%E6%B0%A7%E6%B0%94%E5%88%86%E5%AD%90/QQ20250418-203001.png"
alt="优化完的氧气分子的键长" />
<figcaption aria-hidden="true">优化完的氧气分子的键长</figcaption>
</figure>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2025/04/18/%E7%A7%91%E7%A0%94/VASP/Starry%20Sky/%E6%B0%A7%E6%B0%94%E5%88%86%E5%AD%90/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2025/04/17/%E7%A7%91%E7%A0%94/VASP/2025%E5%B9%B45%E6%9C%88AMD%E5%B9%B3%E5%8F%B0%E4%B8%8BVASP%E7%9A%84%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85/"
                            aria-label=": 2025年4月AMD平台下VASP的编译安装"
                        >
                            2025年4月AMD平台下VASP的编译安装
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2025-04-17T23:40:00+08:00">
	
		    Apr 17, 2025
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/all-categories/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%9A%84%E7%A7%91%E7%A0%94%E4%B9%8B%E6%97%85/">从零开始的科研之旅</a>, <a class="category-link" href="/all-categories/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%9A%84%E7%A7%91%E7%A0%94%E4%B9%8B%E6%97%85/VASP/">VASP</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h1
id="年4月amd平台下vasp的编译安装">2025年4月AMD平台下VASP的编译安装</h1>
<h2 id="wsl2安装">WSL2安装</h2>
<p>本次安装选择的Ubuntu作为发行版，使用人数较多，解决方案较多</p>
<figure>
<img
src="./2025%E5%B9%B45%E6%9C%88AMD%E5%B9%B3%E5%8F%B0%E4%B8%8BVASP%E7%9A%84%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85/image-20250417225652853.png"
alt="Ubuntu 24.04.1 on AMD 7840HS" />
<figcaption aria-hidden="true">Ubuntu 24.04.1 on AMD 7840HS</figcaption>
</figure>
<p>更新源</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">sudo</span> apt update</span><br></pre></td></tr></table></figure>
<h2 id="安装编译器">安装编译器</h2>
<h3 id="aocc">AOCC</h3>
<p>下载aocc-compiler-5.0.0.tar，解压</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">tar -xvf aocc-compiler-5.0.0.tar <span class="comment">#解压</span></span><br><span class="line"><span class="built_in">cd</span> aocc-compiler-3.2.0 <span class="comment">#进入目录</span></span><br><span class="line">./install.sh <span class="comment">#如果没有可执行权限请赋予可执行权限, chmod +x ./install.sh</span></span><br><span class="line"><span class="built_in">source</span> ../setenv_AOCC.sh <span class="comment">#这一行可以写入~/.bashrc，然后source ~/.bashrc，刷新一下环境变量</span></span><br></pre></td></tr></table></figure>
<h3 id="aocl">AOCL</h3>
<p>下载AOCL 5.0 binary packages compiled with AOCC 5.0</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">tar -zxvf XXX.tar.gz <span class="comment">#解压tar.gz包，如果报错请查询Linux下的解压命令，up记不太清了、、、  </span></span><br><span class="line"><span class="built_in">cd</span> XXX</span><br><span class="line">./install.sh -t /home/XXX <span class="comment">#安装，可以指定安装目录，up安装在/home目录下的某个文件夹里的，这样不需要管理员权限、</span></span><br></pre></td></tr></table></figure>
<h2 id="安装openmpi">安装OpenMPI</h2>
<p>在安装OpenMPI之前请确保AOCC、AOCL以及必备的依赖已安装完全</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">which</span> clang <span class="comment">#检查clang</span></span><br><span class="line"><span class="built_in">which</span> clang++ <span class="comment">#检查clang++</span></span><br><span class="line"><span class="built_in">which</span> flang <span class="comment">#检查flang</span></span><br><span class="line">以上三个来自于AOCC和AOCL</span><br><span class="line"><span class="built_in">which</span> c <span class="comment">#检查有没有C</span></span><br><span class="line"><span class="built_in">which</span> c++ <span class="comment">#检查有没有C++</span></span><br><span class="line"><span class="built_in">sudo</span> apt install g++</span><br><span class="line"><span class="built_in">sudo</span> apt install gcc</span><br></pre></td></tr></table></figure>
<p>下载OpenMPI的稳定版本，然后解压，进入目录</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">./configure CC=clang CXX=clang++ FC=flang --prefix=/xxxx <span class="comment">#可以手动指定/xxx目录</span></span><br><span class="line">make -j4 <span class="comment">#以4核心编译，大小可调，比如16核处理器就改成make -j16</span></span><br><span class="line">make install <span class="comment">#编译安装</span></span><br></pre></td></tr></table></figure>
<p>OpenMPI安装时报错很可能是由于依赖问题造成的，建议安装之前<code>sudo apt install g++ cmake gcc</code></p>
<p>在<code>~/.bashrc</code>中添加环境变量</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">MPI_HOME=/xxx/; make <span class="comment">#这一步容易出错，记得添加对目录</span></span><br><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$&#123;MPI_HOME&#125;</span>/bin:<span class="variable">$PATH</span></span><br><span class="line"><span class="built_in">export</span> LD_LIBRARY_PATH=<span class="variable">$&#123;MPI_HOME&#125;</span>/lib:<span class="variable">$LD_LIBRARY_PATH</span></span><br><span class="line"><span class="built_in">export</span> MANPATH=<span class="variable">$&#123;MPI_HOME&#125;</span>/share/man:<span class="variable">$MANPATH</span></span><br></pre></td></tr></table></figure>
<p>安装完后检查一下<code>which mpirun</code></p>
<h2 id="编译vasp">编译VASP</h2>
<p>不提供源码包，可以尝试去各种论坛，微信公众号搜索，仅供学习使用</p>
<p>本次使用的源码包是vasp.6.4.2.tgz</p>
<p>编译之前首先要选择模板，也就是makefile.include，将/vasp.x.x.x/arch文件夹下的<code>makefile.include.aocc_ompi_aocl</code>复制一份到/vasp.x.x.x根目录，因为本次平台是AMD
ZEN4，安装了AOCC，AOCL和OpenMPI，所以选择此模板，接下来修改模板</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># Default precompiler options</span></span><br><span class="line">CPP_OPTIONS = -DHOST=\&quot;LinuxGNU\&quot; \</span><br><span class="line">              -DMPI -DMPI_BLOCK=8000 -Duse_collective \</span><br><span class="line">              -DscaLAPACK \</span><br><span class="line">              -DCACHE_SIZE=4000 \</span><br><span class="line">              -Davoidalloc \</span><br><span class="line">              -Dvasp6 \</span><br><span class="line">              -Duse_bse_te \</span><br><span class="line">              -Dtbdyn \</span><br><span class="line">              -Dfock_dblbuf</span><br><span class="line"></span><br><span class="line">CPP         = flang -E -ffree-form -C -w $*$(FUFFIX) &gt;$*$(SUFFIX) $(CPP_OPTIONS)</span><br><span class="line"></span><br><span class="line">FC          = mpif90</span><br><span class="line">FCL         = mpif90</span><br><span class="line"></span><br><span class="line">FREE        = -ffree-form -ffree-line-length-none</span><br><span class="line"></span><br><span class="line">FFLAGS      = -w -fno-fortran-main -Mbackslash</span><br><span class="line"></span><br><span class="line">OFLAG       = -O2</span><br><span class="line">OFLAG_IN    = $(OFLAG)</span><br><span class="line">DEBUG       = -O0</span><br><span class="line"></span><br><span class="line">OBJECTS     = fftmpiw.o fftmpi_map.o fftw3d.o fft3dlib.o</span><br><span class="line">OBJECTS_O1 += fftw3d.o fftmpi.o fftmpiw.o</span><br><span class="line">OBJECTS_O2 += fft3dlib.o</span><br><span class="line"></span><br><span class="line"><span class="comment"># For what used to be vasp.5.lib</span></span><br><span class="line">CPP_LIB     = $(CPP)</span><br><span class="line">FC_LIB      = $(FC)</span><br><span class="line">CC_LIB      = clang</span><br><span class="line">CFLAGS_LIB  = -O</span><br><span class="line">FFLAGS_LIB  = -O1</span><br><span class="line">FREE_LIB    = $(FREE)</span><br><span class="line"></span><br><span class="line">OBJECTS_LIB = linpack_double.o</span><br><span class="line"></span><br><span class="line"><span class="comment"># For the parser library</span></span><br><span class="line">CXX_PARS    = clang++</span><br><span class="line">LLIBS       = -lstdc++</span><br><span class="line"></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"><span class="comment">## Customize as of this point! Of course you may change the preceding</span></span><br><span class="line"><span class="comment">## part of this file as well if you like, but it should rarely be</span></span><br><span class="line"><span class="comment">## necessary ...</span></span><br><span class="line"><span class="comment">##</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># When compiling on the target machine itself, change this to the</span></span><br><span class="line"><span class="comment"># relevant target when cross-compiling for another architecture</span></span><br><span class="line">VASP_TARGET_CPU ?= -march=znver4 <span class="comment">#7840HS belongs to ZEN4 platform</span></span><br><span class="line">FFLAGS     += $(VASP_TARGET_CPU)</span><br><span class="line"></span><br><span class="line"><span class="comment"># BLAS (mandatory)</span></span><br><span class="line">AMDBLIS_ROOT ?= /home/storm/AOCL_INSTALL/5.0.0/aocc <span class="comment">#Installation category of AOCL</span></span><br><span class="line">BLAS        = -L<span class="variable">$&#123;AMDBLIS_ROOT&#125;</span>/lib -lblis</span><br><span class="line"></span><br><span class="line"><span class="comment"># LAPACK (mandatory)</span></span><br><span class="line">AMDLIBFLAME_ROOT ?= /home/storm/AOCL_INSTALL/5.0.0/aocc <span class="comment">#Installation category of AOCL</span></span><br><span class="line">LAPACK      = -L<span class="variable">$&#123;AMDLIBFLAME_ROOT&#125;</span>/lib -lflame</span><br><span class="line"></span><br><span class="line"><span class="comment"># scaLAPACK (mandatory)</span></span><br><span class="line">AMDSCALAPACK_ROOT ?= /home/storm/AOCL_INSTALL/5.0.0/aocc <span class="comment">#Installation category of AOCL</span></span><br><span class="line">SCALAPACK   = -L<span class="variable">$&#123;AMDSCALAPACK_ROOT&#125;</span>/lib -lscalapack</span><br><span class="line"></span><br><span class="line">LLIBS      += $(SCALAPACK) $(LAPACK) $(BLAS)</span><br><span class="line"></span><br><span class="line"><span class="comment"># FFTW (mandatory)</span></span><br><span class="line">AMDFFTW_ROOT  ?= /home/storm/AOCL_INSTALL/5.0.0/aocc <span class="comment">#Installation category of AOCL</span></span><br><span class="line">LLIBS      += -L$(AMDFFTW_ROOT)/lib -lfftw3</span><br><span class="line">INCS       += -I$(AMDFFTW_ROOT)/include</span><br><span class="line"></span><br><span class="line"><span class="comment"># HDF5-support (optional but strongly recommended)</span></span><br><span class="line"><span class="comment">#CPP_OPTIONS+= -DVASP_HDF5</span></span><br><span class="line"><span class="comment">#HDF5_ROOT  ?= /path/to/your/hdf5/installation</span></span><br><span class="line"><span class="comment">#LLIBS      += -L$(HDF5_ROOT)/lib -lhdf5_fortran</span></span><br><span class="line"><span class="comment">#INCS       += -I$(HDF5_ROOT)/include</span></span><br><span class="line"></span><br><span class="line"><span class="comment"># For the VASP-2-Wannier90 interface (optional)</span></span><br><span class="line"><span class="comment">#CPP_OPTIONS    += -DVASP2WANNIER90</span></span><br><span class="line"><span class="comment">#WANNIER90_ROOT ?= /path/to/your/wannier90/installation</span></span><br><span class="line"><span class="comment">#LLIBS          += -L$(WANNIER90_ROOT)/lib -lwannier</span></span><br></pre></td></tr></table></figure>
<p>然后运行<code>make all</code>即可，官网给的命令是并行安装<code>make DEPS=1 -Jn &lt;target&gt;</code>，我自己尝试并行安装后测试<code>make test</code>会报错，所以<code>make all</code>，这样去测试全部通过不报错</p>
<h2 id="测试安装">测试安装</h2>
<p>为了测试是否正确安装，可以进行测试</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">make <span class="built_in">test</span></span><br></pre></td></tr></table></figure>
<h2 id="添加到环境变量">添加到环境变量</h2>
<p>官方提供的是源码包，通过编译，我们得到了CPU可执行的二进制包，再二进制包的目录下(bin/目录下)，我可以同在终端中直接输入二进制包的名字来直接执行(VASP编译会产生三个二进制包：vasp_std,
vasp_gam,
vasp_ncl)，比如在bin/目录下直接输入vasp_std就可以看到VASP的标志，但是为了随时随地在任意目录下也能执行计算，因此需要将bin/目录添加到环境变量里(前提是make
test不报错)</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">export</span> PATH=<span class="variable">$PATH</span>:/path/to/vasp.x.x.x/bin</span><br><span class="line"><span class="built_in">source</span> ~/.bashrc</span><br></pre></td></tr></table></figure>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2025/04/17/%E7%A7%91%E7%A0%94/VASP/2025%E5%B9%B45%E6%9C%88AMD%E5%B9%B3%E5%8F%B0%E4%B8%8BVASP%E7%9A%84%E7%BC%96%E8%AF%91%E5%AE%89%E8%A3%85/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2025/04/14/%E7%A7%91%E7%A0%94/VASP/formula/"
                            aria-label=": 一些简单的Linux命令"
                        >
                            一些简单的Linux命令
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2025-04-14T16:40:40+08:00">
	
		    Apr 14, 2025
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/all-categories/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%9A%84%E7%A7%91%E7%A0%94%E4%B9%8B%E6%97%85/">从零开始的科研之旅</a>, <a class="category-link" href="/all-categories/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%9A%84%E7%A7%91%E7%A0%94%E4%B9%8B%E6%97%85/VASP/">VASP</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <p>使用for循环批量创建文件夹</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> &#123;2..9&#125;; <span class="keyword">do</span> <span class="built_in">cp</span> 0.01 0.0<span class="variable">$i</span> -r ; <span class="keyword">done</span></span><br></pre></td></tr></table></figure>
<p>使用sed命令不打开文件而进行替换</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sed <span class="string">&#x27;3s/0.01/0.02/g&#x27;</span> ICNAR</span><br></pre></td></tr></table></figure>
<blockquote>
<p>对第三行(3)出现的所有0.01(g,全局替换)进行替换(s表示替换操作)，替换为0.02，只输出替换后的结果</p>
<p>sed ‘3/0.01/0.02/g’ INCAR &gt; INCAR最后什么也没有</p>
<p>加上-i参数可以直接进行编辑</p>
</blockquote>
<p>结合for循环和sed批量命名</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[storm@cachyos-x8664 ex03]$ <span class="keyword">for</span> i <span class="keyword">in</span> *; <span class="keyword">do</span> sed -i <span class="string">&quot;3s/0.05/<span class="variable">$i</span>/g&quot;</span> <span class="variable">$i</span>/INCAR ; <span class="keyword">done</span></span><br><span class="line">[storm@cachyos-x8664 ex03]$ grep SIGMA */INCAR</span><br><span class="line">0.01/INCAR:SIGMA = 0.01</span><br><span class="line">0.02/INCAR:SIGMA = 0.02</span><br><span class="line">0.03/INCAR:SIGMA = 0.03</span><br><span class="line">0.04/INCAR:SIGMA = 0.04</span><br><span class="line">0.05/INCAR:SIGMA = 0.05</span><br><span class="line">0.06/INCAR:SIGMA = 0.06</span><br><span class="line">0.07/INCAR:SIGMA = 0.07</span><br><span class="line">0.08/INCAR:SIGMA = 0.08</span><br><span class="line">0.09/INCAR:SIGMA = 0.09</span><br></pre></td></tr></table></figure>
<blockquote>
<p>使用双引号以读取变量的值</p>
</blockquote>
<p>注意这里使用的是英文括号而不是花括号</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> $(<span class="built_in">seq</span> 8 2 16); <span class="keyword">do</span> <span class="built_in">cp</span> 888/POSCAR <span class="variable">$&#123;i&#125;</span><span class="variable">$&#123;i&#125;</span><span class="variable">$&#123;i&#125;</span>/POSCAR; <span class="keyword">done</span></span><br></pre></td></tr></table></figure>
<p>“提交任务的命令”</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yhbatch -p gsc -N 1 -J <span class="built_in">test</span> job_sub </span><br></pre></td></tr></table></figure>
<p>找能量的命令</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">grep  without OUTCAR | <span class="built_in">tail</span> -n 1</span><br><span class="line">grep <span class="string">&#x27;  without&#x27;</span> OUTCAR | <span class="built_in">tail</span> -n 1  <span class="comment"># 本人常用的是这个</span></span><br><span class="line">grep sigma OUTCAR | <span class="built_in">tail</span> -n 1 </span><br></pre></td></tr></table></figure>
<p>提交任务，多个文件夹</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> *; <span class="keyword">do</span> <span class="built_in">cd</span> <span class="variable">$i</span> ; vasp1; <span class="built_in">cd</span> <span class="variable">$OLDPWD</span>; <span class="keyword">done</span></span><br></pre></td></tr></table></figure>
<blockquote>
<p>alias vasp1=‘mpirun -n 8 vasp’</p>
</blockquote>
<p>输出时间信息</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> *0; <span class="keyword">do</span> <span class="built_in">echo</span> -e  <span class="variable">$i</span> <span class="string">&quot;\t&quot;</span> $(grep User <span class="variable">$i</span>/OUTCAR | awk <span class="string">&#x27;&#123;print $4&#125;&#x27;</span>); <span class="keyword">done</span></span><br></pre></td></tr></table></figure>
<p>绘图脚本</p>
<figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> matplotlib.pyplot <span class="keyword">as</span> plt</span><br><span class="line"><span class="keyword">import</span> numpy <span class="keyword">as</span> np</span><br><span class="line"></span><br><span class="line">x,y = np.loadtxt(<span class="string">&#x27;data.dat&#x27;</span>, delimiter =  <span class="string">&#x27;,&#x27;</span>,</span><br><span class="line">      usecols=(<span class="number">0</span>,<span class="number">1</span>), unpack=<span class="literal">True</span>)</span><br><span class="line">plt.xlabel(<span class="string">&#x27;ENCUT / eV&#x27;</span>)</span><br><span class="line">plt.ylabel(<span class="string">&#x27;Ttme / S&#x27;</span>)</span><br><span class="line">plt.plot(x,y, <span class="string">&#x27;rs-&#x27;</span>, linewidth=<span class="number">2.0</span>)</span><br><span class="line">plt.show()</span><br></pre></td></tr></table></figure>
<p>在vim中进行替换</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">: 10,30s/$/T T T/g</span><br></pre></td></tr></table></figure>
<blockquote>
<p>$表示每一行的末尾</p>
</blockquote>
<p>提取能量（用制表符TAB进行分隔）</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">for</span> i <span class="keyword">in</span> [0-9]*/; <span class="keyword">do</span></span><br><span class="line">  <span class="built_in">dir</span>=<span class="variable">$&#123;i%/&#125;</span></span><br><span class="line">  energy=$(grep <span class="string">&#x27;  without&#x27;</span> <span class="string">&quot;<span class="variable">$dir</span>/OUTCAR&quot;</span> | <span class="built_in">tail</span> -n 1 | awk <span class="string">&#x27;&#123;print $7&#125;&#x27;</span>)</span><br><span class="line">  <span class="built_in">printf</span> <span class="string">&quot;%s\t%s\n&quot;</span> <span class="string">&quot;<span class="variable">$dir</span>&quot;</span> <span class="string">&quot;<span class="variable">$energy</span>&quot;</span></span><br><span class="line"><span class="keyword">done</span> &gt; data</span><br></pre></td></tr></table></figure>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2025/04/14/%E7%A7%91%E7%A0%94/VASP/formula/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2025/04/14/%E7%A7%91%E7%A0%94/VASP/Starry%20Sky/VASP%E4%B8%AD%E7%9A%84%E5%90%84%E7%A7%8D%E6%8A%A5%E9%94%99/"
                            aria-label=": VASP中的各种报错"
                        >
                            VASP中的各种报错
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2025-04-14T16:40:00+08:00">
	
		    Apr 14, 2025
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/all-categories/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%9A%84%E7%A7%91%E7%A0%94%E4%B9%8B%E6%97%85/">从零开始的科研之旅</a>, <a class="category-link" href="/all-categories/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%9A%84%E7%A7%91%E7%A0%94%E4%B9%8B%E6%97%85/VASP/">VASP</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <p>如题，记录一下在计算时遇到的各种报错</p>
<h2 id="section">2025.05.14</h2>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"> -----------------------------------------------------------------------------</span><br><span class="line">|                                                                             |</span><br><span class="line">|     EEEEEEE  RRRRRR   RRRRRR   OOOOOOO  RRRRRR      <span class="comment">###     ###     ###     |</span></span><br><span class="line">|     E        R     R  R     R  O     O  R     R     <span class="comment">###     ###     ###     |</span></span><br><span class="line">|     E        R     R  R     R  O     O  R     R     <span class="comment">###     ###     ###     |</span></span><br><span class="line">|     EEEEE    RRRRRR   RRRRRR   O     O  RRRRRR       <span class="comment">#       #       #      |</span></span><br><span class="line">|     E        R   R    R   R    O     O  R   R                               |</span><br><span class="line">|     E        R    R   R    R   O     O  R    R      <span class="comment">###     ###     ###     |</span></span><br><span class="line">|     EEEEEEE  R     R  R     R  OOOOOOO  R     R     <span class="comment">###     ###     ###     |</span></span><br><span class="line">|                                                                             |</span><br><span class="line">|     ERROR FEXCF: supplied exchange-correlation table                        |</span><br><span class="line">|      is too small, maximal index : 7355                                     |</span><br><span class="line">|                                                                             |</span><br><span class="line">|       ----&gt;  I REFUSE TO CONTINUE WITH THIS SICK JOB ... BYE!!! &lt;----       |</span><br><span class="line">|                                                                             |</span><br><span class="line"> -----------------------------------------------------------------------------</span><br></pre></td></tr></table></figure>
<p>删除<code>NPAR = 1</code>参数</p>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2025/04/14/%E7%A7%91%E7%A0%94/VASP/Starry%20Sky/VASP%E4%B8%AD%E7%9A%84%E5%90%84%E7%A7%8D%E6%8A%A5%E9%94%99/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2025/04/14/%E7%A7%91%E7%A0%94/VASP/Starry%20Sky/Vasp-note/"
                            aria-label=": VASP学习笔记"
                        >
                            VASP学习笔记
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2025-04-14T16:40:00+08:00">
	
		    Apr 14, 2025
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/all-categories/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%9A%84%E7%A7%91%E7%A0%94%E4%B9%8B%E6%97%85/">从零开始的科研之旅</a>, <a class="category-link" href="/all-categories/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%9A%84%E7%A7%91%E7%A0%94%E4%B9%8B%E6%97%85/VASP/">VASP</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <p>记录一下维也纳第一性原理计算软件包（VASP）的学习过程，有点乱、、、</p>
<p>计算一个体系会出现两种优化过程</p>
<ul>
<li>电子结构的优化
<ul>
<li>迭代求解薛定谔方程来获得体系能量极小值的一个过程</li>
</ul></li>
<li>几何结构的优化
<ul>
<li>在电子结构优化的结果上，获取原子的受力情况，然后根据受力情况，调节原子的位置，再进行电子结构优化，获取新的受力情况，然后再调节原子位置，一直重复这样的过程，直至找到体系势能面上一个极小值的过程</li>
</ul></li>
</ul>
<p><code>OSICAR</code>用于记录优化过程的信息</p>
<p>在<code>INCAR</code>中设置<code>ALGO</code>参数可以指定算法</p>
<p><code>ZVAL</code>是<code>POTCAR</code>中对应元素的价电子</p>
<p>查看K点的个数：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">grep irreducible OUTCAR</span><br></pre></td></tr></table></figure>
<p>固体物理中，费米能级对应的是最高电子占据轨道的能量，也就是<code>HOMO</code></p>
<p>以下情况需要考虑自旋极化</p>
<ul>
<li>单原子的计算</li>
<li>O<span class="math inline"><sub>2</sub></span>
分子(基态为三重态)</li>
<li>自由基相关的计算</li>
<li>含Fe,Co, Ni 的体系</li>
<li>要计算的体系具有磁性：顺磁，铁磁，反铁磁等，要打开自旋极化。</li>
<li>当关注体系的电子性质时，且自己不知道加或者不加的时候，建议加上</li>
</ul>
<p>EDIFF
控制电子步（自洽）的收敛标准，在O原子的计算中，由于我们不需要优化，直接进行静态计算，完全由EDIFF控制计算的收敛情况</p>
<p>EDIFFG控制离子步的收敛标准</p>
<ul>
<li>对于优化，我们可以使用力作为收敛标准，此时EDIFFG为负值。一般来说取值在-0.01到-0.05之间(-0.01对于力收敛来说已经是一个很严格的要求了)。</li>
<li>当然，对于较大的体系，我们也可以使用能量作为标准：此时，EDIFFG
为正值，一般取值范围在0.0001-0.001即可。</li>
</ul>
<p>单点计算、静态计算、自洽计算：几何结构计算前后不发生变化</p>
<p><code>IRBION</code>优化分子结构</p>
<p>一般来说，优化结构的时候有3个选择：</p>
<ul>
<li>IBRION=3：你的初始结构很差的时候；</li>
<li>IBRION=2：共轭梯度算法，很可靠的一个选择，一般来说用它基本没什么问题。</li>
<li>IBRION=1：用于小范围内稳定结构的搜索。</li>
</ul>
<p><code>CONTCAR</code>包含优化完之后的信息</p>
<p>频率计算的作用</p>
<ul>
<li>确定结构是否稳定;</li>
<li>看振动方式和大小，用来和实验对比，棋博士最新的文章就是一个非常好的例子;</li>
<li>反应热，反应能垒，吸附能等的零点能矫正;</li>
<li>确认过渡态(有一个振动的虚频)</li>
<li>热力学中计算<code>entropy</code>，用于计算化学势，微观动力学中的指前因子和反应能垒。</li>
</ul>
<p>频率分析的关键参数</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">IBRION = 5 <span class="comment">#之前设置的2</span></span><br><span class="line">NFREE = 2 <span class="comment">#新加入的参数</span></span><br><span class="line">POTIM = 0.02 <span class="comment">#减小了数值</span></span><br></pre></td></tr></table></figure>
<p><strong>怎么确定POSCAR中的原子？</strong>——比如乙醇中的羟基氢是POSCAR中的哪一个呢？？？</p>
<p>晶胞&amp;&amp;原胞</p>
<p>7种晶系与14种布拉维点阵：简单三六菱，单斜底，四方体</p>
<p><code>NWRITE</code>用来控制输出文件的详细程度</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">NWRITE = 0 <span class="comment"># 最小输出</span></span><br><span class="line">NWRITE = 1 <span class="comment">#中等</span></span><br><span class="line">NWRITE = 2 <span class="comment">#详细输出</span></span><br></pre></td></tr></table></figure>
<p><code>ISTART</code>用来初始化波函数</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ISTART = 1 <span class="comment">#读取WAVECAR续算</span></span><br><span class="line">ISTART = 0 <span class="comment">#从零开始算</span></span><br></pre></td></tr></table></figure>
<p>单纯从数据库中获取的结构，只能作为一个合理的初始值，与计算所得到的理论结构还有一定的差距，因此我们需要对该结构进行优化才可以获取稳定的晶格参数信息。有两个方法可以实现：</p>
<ul>
<li>1 Birch-Murnaghan状态方程拟合</li>
<li>2 VASP计算中通过调节ISIF参数直接优化Bulk</li>
</ul>
<p>Birch-Murnaghan方程 <span class="math display">$$
E(a)=E_0+\dfrac{9V_0B_0}{16}([(\frac{a_0}{a})^2-1]^3B_0^{'}+[(\dfrac{a_0}{a})-1]^2[6-4(\frac{a_0}{a})^2])
$$</span></p>
<p><span class="math display">$$
(\dfrac{V_0}{V})^{\frac{2}{3}}=(\dfrac{a_0^3}{a_{actual}^3})^{\frac{2}{3}}=(\dfrac{a_0}{a_{actual}})^2
$$</span></p>
<p><span class="math display">$$
x=\dfrac{1}{(a\times 2.8664)^2}
$$</span></p>
<blockquote>
<p>a代表缩放系数，2.8664是晶胞参数</p>
</blockquote>
<p>除了用B-M方程拟合来确定晶格常数之外，还可以使用直接优化法确定晶格常数：ISIF
= 3 + ENCUT</p>
<ul>
<li><code>ISIF=2</code>（默认）：优化原子位置</li>
<li><code>ISIF=3</code>：优化原子位置 + 晶胞形状/体积。</li>
</ul>
<p>单点计算误区</p>
<ul>
<li>单点计算（<code>NSW=0</code> 或 <code>IBRION=-1</code>）时无需设置
<code>ISIF=0</code>，因为离子已固定。</li>
<li>错误设置 <code>ISIF=0</code>
会禁用应力计算，可能导致后续分析缺失数据。</li>
</ul>
<p>为何需要增大 <code>ENCUT</code>？</p>
<ul>
<li>Pulay Stress：
<ul>
<li><strong>定义</strong>：当晶胞体积变化时，平面波基组不完整导致的应力误差。</li>
<li><strong>后果</strong>：晶格优化结果不准确。</li>
<li>解决方法
<ol type="1">
<li><strong>保持体积不变</strong>（BM 方程拟合法）</li>
<li><strong>增大 <code>ENCUT</code></strong>（直接优化法）</li>
</ol></li>
</ul></li>
<li>规则
<ul>
<li>设置 <code>ENCUT = 1.3 * max(ENMAX)</code>（<code>ENMAX</code> 取自
<code>POTCAR</code>）</li>
<li>示例：Fe 的 <code>ENMAX=267.882 eV</code> →
<code>ENCUT=350 eV</code>（但文档设置为
<code>600 eV</code>，更保守）</li>
</ul></li>
</ul>
<p>DOS态密度计算需要使用更多的K点</p>
<blockquote>
<p>A high quality DOS requires usually very fine k-meshes.</p>
</blockquote>
<p><code>ISMEAR</code>的选择</p>
<ul>
<li>对于半导体和绝缘体体系，ISMEAR的值取绝对不能大于0， 一般用0；</li>
<li>对所有体系，如果想获取更加精确能量的时候用-5，但这时候如果K点数目小于3，程序则会罢工；</li>
<li>K 点少，半导体或者绝缘体，那么只能用 ISMEAR = 0；</li>
<li>在DOS能带计算中，使用ISMEAR= -5 用于获取精确的信息。</li>
<li>对于金属来说，ISMEAR的取值一般为&gt;=0 的数值（0,1,2）；</li>
<li>保守地说，ISMEAR = 0 (Gaussian Smearing)
可以满足大部分的体系（金属，导体，半导体，分子）；</li>
<li>如果不知道怎么取ISMEAR，直接用0是一个很保险的做法。也可以测试不同的值对计算的影响，但是新手的话，即使测试完了，也不知道根据什么去判断对结果的影响。</li>
</ul>
<p>电子数的积分区间是从负无穷到费米能级</p>
<h2 id="各种参数的作用">各种参数的作用</h2>
<h3 id="istart确定是否读取-wavecar-文件">ISTART——确定是否读取 WAVECAR
文件</h3>
<p>ISTART = 0 | 1 |2 |3</p>
<p>默认值</p>
<ul>
<li>如果存在WAVECAR则读取: ISTART = 1</li>
<li>如果不存在WAVECAR，从头算: ISTART = 0</li>
</ul>
<p>ISTART = 2，读取WAVECAR，截断能原胞不发生改变</p>
<h3 id="icharg确定-vasp-如何构造初始电荷密度">ICHARG——确定 VASP
如何构造初始电荷密度</h3>
<p>ICHARG = 0 | 1 |2 | 4 | 5</p>
<ul>
<li>ICHARG = 0，默认值，从初始波函数计算电荷密度</li>
<li>ICHARG = 1，从 CHGCAR
文件中读取电荷密度，并使用原子电荷密度的线性组合从旧位置（在 CHGCAR
上）外推到新位置</li>
<li>ICHARG = 2，默认值，以原子电荷密度的叠加为例</li>
</ul>
<h3 id="prec指定精度模式">PREC——指定精度模式</h3>
<p>PREC = Normal | Single | SingleN | Accurate | Low | Medium | High</p>
<ul>
<li>PREC = Normal，默认</li>
<li>PREC = Single</li>
<li>PREC = SingleN</li>
<li>PREC = Accurate</li>
</ul>
<h3
id="lreal确定投影算子是在实空间还是在倒数空间中求值">LREAL——确定投影算子是在实空间还是在倒数空间中求值</h3>
<p>LREAL = .FALSE. | Auto (or A) | On (or O) | .TRUE.</p>
<ul>
<li>LREAL = .FALSE. 默认值，倒数空间投影，小体系，精确</li>
<li>LREAL=Auto
在实空间中进行投影，全自动优化投影算子（几乎不需要用户干扰）</li>
</ul>
<h3
id="algo指定电子最小化算法或选择-gw-计算类型的便捷选项">ALGO——指定电子最小化算法或选择
GW 计算类型的便捷选项。</h3>
<p>ALGO = Normal | VeryFast | Fast | Conjugate | All | Damped | Subrot |
Eigenval | Exact | None | Nothing | CHI | G0W0 | GW0 | GW | scGW0 | scGW
| G0W0R | GW0R | GWR | scGW0R | scGWR | ACFDT | RPA | ACFDTR | RPAR |
BSE | TDHF</p>
<p>默认值: Normal</p>
<h3 id="encut指定以-ev-为单位设置的平面波基的能量截止">ENCUT——指定以 eV
为单位设置的平面波基的能量截止</h3>
<p>ENCUT = [real]</p>
<p>默认为POTCAR中的ENMAX，但是官方==强烈建议==在 INCAR
文件中始终手动指定能量截止
ENCUT，以确保计算之间的准确性相同。否则，不同计算之间的默认 ENCUT
可能会有所不同（例如，对于内聚能的计算），结果是无法比较总能量。</p>
<h3 id="ismear能带展宽方法">ISMEAR——能带展宽方法</h3>
<p>ISMEAR = -15 | -14 | -5 | -4 | -3 | -2 | -1 | 0 | [integer]&gt;0</p>
<p>默认值：1</p>
<p>ISMEAR 决定如何为每个轨道设置部分占据数 f<span
class="math inline"><sub><em>n</em><em>k</em></sub></span> ,SIGMA
以电子伏特(eV)为单位确定展宽的宽度</p>
<p>以下是来自AI的比喻解释：</p>
<hr />
<h4
id="ismear决定如何给电子打分"><strong>ISMEAR：决定如何给电子“打分”</strong></h4>
<ul>
<li><strong>问题</strong>：电子在能级上的分布是离散的（像楼梯台阶），但实际计算时需要用连续函数去“平滑”这些台阶。</li>
<li><strong>ISMEAR</strong> 就是选择“平滑方式”的方法：
<ul>
<li><strong><code>ISMEAR = -5</code></strong>：采用Blöchl修正的四面体方法，无展宽，严格按台阶处理（绝对精确，但只适用于绝缘体/半导体，速度慢）</li>
<li><strong><code>ISMEAR = 0</code></strong>：采用高斯展宽，用高斯函数“模糊”台阶边缘（适合半导体/绝缘体，平衡精度和速度）</li>
<li><strong><code>ISMEAR = 1</code></strong>：默认值，用更复杂的函数模糊台阶（适合金属，容忍更多模糊，计算快）</li>
</ul></li>
</ul>
<h4 id="sigma展宽的宽容度"><strong>2.
SIGMA：展宽的“宽容度”</strong></h4>
<ul>
<li><strong>问题</strong>：<code>ISMEAR</code>
选择用高斯函数模糊时，<strong>SIGMA
决定模糊的程度</strong>（就像PS里“高斯模糊”的半径）</li>
<li><strong>SIGMA
越小</strong>：模糊范围越小，越接近真实台阶（精度高，但容易震荡，收敛难）</li>
<li><strong>SIGMA
越大</strong>：模糊范围越大，电子分布越平滑（容易收敛，但可能掩盖真实细节）</li>
</ul>
<h4
id="到底怎么设置一句话总结"><strong>到底怎么设置？一句话总结</strong></h4>
<table>
<colgroup>
<col style="width: 30%" />
<col style="width: 20%" />
<col style="width: 17%" />
<col style="width: 32%" />
</colgroup>
<thead>
<tr>
<th><strong>体系类型</strong></th>
<th><strong>推荐 ISMEAR</strong></th>
<th><strong>推荐 SIGMA</strong></th>
<th><strong>注意事项</strong></th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>绝缘体/半导体</strong>（原子、分子）</td>
<td><code>0</code>（绝对不能大于零）</td>
<td>0.05~0.1</td>
<td>不要用 <code>ISMEAR=1</code>，会引入误差！</td>
</tr>
<tr>
<td><strong>金属</strong></td>
<td><code>1</code></td>
<td>0.1~0.2</td>
<td>SIGMA 太小会导致震荡！</td>
</tr>
<tr>
<td><strong>能带/DOS计算</strong></td>
<td><code>-5</code></td>
<td>不用设置（不展宽）</td>
<td>仅适用于绝缘体，且需要密集 K 点！</td>
</tr>
</tbody>
</table>
<ul>
<li>保守地说，ISMEAR = 0 (Gaussian Smearing)
可以满足大部分的体系（金属，导体，半导体，分子）；</li>
<li>如果不知道怎么取ISMEAR，直接用0是一个很保险的做法。也可以测试不同的值对计算的影响，但是新手的话，即使测试完了，也不知道根据什么去判断对结果的影响。</li>
</ul>
<h3 id="常见错误"><strong>常见错误</strong></h3>
<ol type="1">
<li><strong>对绝缘体用 <code>ISMEAR=1</code></strong> →
结果完全错误！</li>
<li><strong>SIGMA 太大（比如 0.5）</strong> →
电子分布过度平滑，能量不准。</li>
<li><strong>对金属用 <code>ISMEAR=0</code></strong> → SCF
难收敛，疯狂报错！</li>
</ol>
<hr />
<h3 id="举个具体例子"><strong>举个具体例子</strong></h3>
<p>假设你计算 <strong>硅（半导体）</strong>： -
<strong>正确设置</strong>： <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ISMEAR = 0</span><br><span class="line">SIGMA = 0.05</span><br></pre></td></tr></table></figure> -
<strong>错误设置</strong>：</p>
<p><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">ISMEAR = 1   <span class="comment"># 会引入非物理的金属性！</span></span><br><span class="line">SIGMA = 0.5  <span class="comment"># 能量误差可能大到 1 eV！</span></span><br></pre></td></tr></table></figure></p>
<hr />
<h3 id="终极口诀"><strong>终极口诀</strong></h3>
<ul>
<li><strong>绝缘体/半导体</strong> → <code>ISMEAR=0</code> + 小
SIGMA（0.05~0.1）</li>
<li><strong>金属</strong> → <code>ISMEAR=1</code> + 稍大
SIGMA（0.1~0.2）</li>
<li><strong>画能带/DOS</strong> → <code>ISMEAR=-5</code>（别动
SIGMA）</li>
</ul>
<h2
id="ibrion确定在计算过程中晶体结构如何变化如何调整原子位置来寻找能量最低点">IBRION——确定在计算过程中晶体结构如何变化（如何调整原子位置来寻找能量最低点）</h2>
<p>Default: IBRION = -1 for NSW=−1 or 0</p>
<p>​ = 0 else</p>
<ul>
<li>无变化，IBRION = -1 （避免在 NSW&gt;0 时将 IBRION
设置为-1，以防止相同结构被重新计算 NSW 次）</li>
<li>分子动力学，IBRION = 0</li>
<li>结构优化
<ul>
<li>准牛顿法， IRBION =1</li>
<li>共轭梯度， IBRION =2</li>
<li>阻尼分子动力学，IBRION = 3</li>
</ul></li>
<li>计算声子
<ul>
<li>IBRION=5 无对称性的有限差分</li>
<li>IBRION=6 具有对称性的有限差分</li>
<li>IBRION=7 无对称性微扰理论</li>
<li>IBRION=8 具有对称性的微扰理论</li>
</ul></li>
<li>分析过渡态
<ul>
<li>IBRION = 40 内禀反应坐标计算</li>
<li>IRBION = 44 改进的dimer方法</li>
</ul></li>
</ul>
<h2 id="nsw描述离子步长的最大数量">NSW——描述离子步长的最大数量</h2>
<p>NSW = [integer]</p>
<p>Default: <strong>NSW</strong> = 0</p>
<h2
id="potim设置分子动力学中的时间步长或离子弛豫中的步长宽度">POTIM——设置分子动力学中的时间步长或离子弛豫中的步长宽度</h2>
<p>IBRION确定了在计算过程中晶体结构如何变化，如何寻找最低点（“山谷”），POTIM就是“每次移动的距离”</p>
<ul>
<li>如果IBRION = 0，则必须设置POTIM
<ul>
<li>对于 IBRION=0，POTIM 给出了所有从头开始分子动力学运行的时间步长（以
fs 为单位），因此必须提供它，否则 VASP 在启动后立即崩溃。</li>
</ul></li>
<li>如果IBRION = 1,2,3，默认值为0.5
<ul>
<li>对于 IBRION=1、2 和
3，分别对应于使用拟牛顿算法、共轭梯度算法和阻尼分子动力学的离子弛豫，POTIM
标签作为步长宽度的缩放常数。准牛顿算法对该参数的选择特别敏感</li>
</ul></li>
<li>如果IRBION = 5,6，默认值为0.015
<ul>
<li>对于 IBRION=5 和 6，使用有限差分方法进行声子计算，其中 POTIM 是计算
Hessian 矩阵的每个离子位移的宽度。</li>
</ul></li>
</ul>
<p><strong>POTIM 太大</strong> →
跨步太大，可能跳过最低点（震荡不收敛）<strong>POTIM 太小</strong> →
移动太慢，优化耗时</p>
<h2
id="ncore确定在单个轨道上工作的计算核心数量">NCORE——确定在单个轨道上工作的计算核心数量</h2>
<p>默认值：NCORE = 1</p>
<p>NCORE的设置可以优化计算资源，降低内存用量（但有可能降低计算速度），如果体系非常小那就可以不用设置，直接并行即可</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mpirun -n <span class="string">&#x27;core numbers&#x27;</span> vasp</span><br></pre></td></tr></table></figure>
<h2
id="nfree根据-ibrionnfree-指定离子收敛运行历史中记住的步数或冻结声子计算中的离子位移数">NFREE——根据
IBRION，NFREE
指定离子收敛运行历史中记住的步数，或冻结声子计算中的离子位移数</h2>
<h2 id="ldipol开启对势能和力的修正">LDIPOL——开启对势能和力的修正</h2>
<p>LDIPOL 开启对势能和力的修正。可应用于具有净偶极矩的带电分子和平板</p>
<p>LDIPOL = .TRUE. | .FALSE.</p>
<p>默认值：LDIPOL = .FALSE.</p>
<p>偶极子的存在与周期性边界条件相结合，会导致总能量随超胞大小的收敛速度缓慢。此外，有限尺寸误差会影响势能和力。通过在
INCAR 文件中设置 LDIPOL=.TRUE. 可以抵消这种影响。对于
LDIPOL=.TRUE.，会添加一个线性校正，对于带电的晶胞，会添加一个二次静电势到局部势中，以校正由周期性边界条件引入的误差。激活此标签时，==必须指定标签
IDIPOL，也可以选择指定标签 DIPOL==</p>
<p>这种模式的最大优点是力中的主导误差得到了修正，并且可以针对非对称平板评估功函数。缺点是向电子基态的收敛可能会==显著减慢==，也就是说，可能需要更多的电子迭代来获得所需的精度</p>
<h2
id="idipol开启对特定方向或所有方向的总能量的单极偶极和四极校正">IDIPOL——开启对特定方向或所有方向的总能量的单极/偶极和四极校正</h2>
<p>IDIPOL = 1 | 2 | 3 | 4</p>
<p>IDIPOL =
1-3，仅分别沿第一、第二或第三晶格矢量方向计算偶极矩，<strong>此标志应用于平板计算，表面法线为设置
IDIPOL 的方向，并可选择使用 DIPOL 标签指定平板的质心</strong></p>
<p>IDIPOL =
4，将计算所有方向上的全偶极矩，<strong>对孤立分子进行计算时使用此标志</strong></p>
<h2 id="ispin控制自旋极化">ISPIN——控制自旋极化</h2>
<p>ISPIN = 1 | 2</p>
<p>默认：ISPIN = 1，执行非自旋极化计算</p>
<p>ISPIN = 2，执行自旋极化计算（共线）</p>
<p>对于非共线计算，忽略 ISPIN。在 VASP 6.5.0 中，如果 ISPIN = 2 且
MAGMOM 与 LNONCOLLINEAR=.TRUE. ==结合使用==，计算将以错误消息退出</p>
<h2 id="nelm最大电子步收敛">NELM——最大电子步收敛</h2>
<p>默认值等于60</p>
<h2
id="lwave决定在运行结束时波函数是否写入-wavecar-文件">LWAVE——决定在运行结束时波函数是否写入
WAVECAR 文件</h2>
<p>LWAVE = [logical] 默认值：LWAVE = .NOT. LH5 | .TRUE.</p>
<p>一般情况不开，文件巨大、、、</p>
<figure>
<img src="./Vasp-note/image-20250422173131346.png"
alt="巨大的WAVECAR" />
<figcaption aria-hidden="true">巨大的WAVECAR</figcaption>
</figure>
<h2
id="lcharg决定是否写入电荷密度chgcar-chg">lCHARG——决定是否写入电荷密度(CHGCAR
&amp; CHG)</h2>
<p>LCHARG = .NOT.LH5 | .TRUE. 默认值：LCHARG = .NOT. LH5</p>
<h2
id="addgrid决定是否使用额外的辅助网格来评估增强电荷">ADDGRID——决定是否使用额外的辅助网格来评估增强电荷</h2>
<p>ADDGRID = .TRUE. | .FALSE. 默认值：ADDGRID = .FALSE.</p>
<p>==因此，我们建议进行细致的测试，以验证 ADDGRID
是否按预期工作；请不要默认在所有计算中使用此标签！==</p>
<h2
id="laspath控制局域非球面性修正的参数">LASPATH——控制局域非球面性修正的参数</h2>
<p>看不懂思密达、、、</p>
<p>LASPH = .TRUE. | .FALSE.</p>
<p>默认值：LASPH = .FALSE.</p>
<ul>
<li>开启 <code>LASPH = .TRUE.</code>
<ul>
<li>在计算交换关联能时，计入原子周围电子密度的
<strong>非球面性贡献</strong>（如 d/f 轨道的非对称分布）。</li>
<li>修正总能量、力和应力，尤其在强各向异性体系中影响显著。</li>
<li>增加计算量（约10%-30%耗时），但对精度提升可能至关重要。</li>
</ul></li>
</ul>
<h2
id="lvhar确定局部势能v_ionicrv_hartree是否写入locpot文件">LVHAR——确定局部势能<span
class="math inline"><em>V</em><sub><em>i</em><em>o</em><em>n</em><em>i</em><em>c</em></sub></span>(r)+<span
class="math inline"><em>V</em><sub><em>h</em><em>a</em><em>r</em><em>t</em><em>r</em><em>e</em><em>e</em></sub></span>是否写入LOCPOT文件</h2>
<p>默认值：LVHAR = .FALSE.</p>
<h2
id="lorbit选择一种投影到局部量子数lm上的方法并写入-procarproout-文件">LORBIT——选择一种投影到局部量子数(lm)上的方法，并写入
PROCAR/PROOUT 文件</h2>
<ul>
<li><strong>作用</strong>：决定是否计算并输出原子轨道的投影波函数（投影到球谐函数或特定轨道），以及如何输出局域态密度（LDOS）。</li>
<li><strong>输出文件</strong>：主要影响<code>PROCAR</code>和<code>DOSCAR</code>文件的内容（若<code>LORBIT</code>≥10还会生成<code>LOCPOT</code>等文件）</li>
</ul>
<table>
<colgroup>
<col style="width: 9%" />
<col style="width: 90%" />
</colgroup>
<thead>
<tr>
<th>值</th>
<th>功能说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>0</strong></td>
<td><strong>默认值</strong>，不计算轨道投影（仅输出总能带和总态密度）。</td>
</tr>
<tr>
<td><strong>1</strong></td>
<td>计算原子轨道的投影（写入<code>PROCAR</code>），但不分解到具体轨道（如s/p/d）。</td>
</tr>
<tr>
<td><strong>2</strong></td>
<td>分解到轨道角动量（s/p/d/f）的投影，但不分磁量子数（如px/py/pz不分开）。</td>
</tr>
<tr>
<td><strong>10</strong></td>
<td>类似<code>LORBIT=1</code>，但额外输出<code>LOCPOT</code>文件（包含局域势信息）。</td>
</tr>
<tr>
<td><strong>11</strong></td>
<td>类似<code>LORBIT=2</code>，但额外输出<code>LOCPOT</code>文件。</td>
</tr>
<tr>
<td><strong>12</strong></td>
<td><strong>最常用</strong>：分解到磁量子数（如px/py/pz分开），适合详细轨道分析。</td>
</tr>
</tbody>
</table>
<h2
id="lasph控制赝势计算中是否考虑非球面贡献">LASPH——控制赝势计算中是否考虑非球面贡献</h2>
<p>主要影响<strong>交换关联势（XC
Potential）</strong>和<strong>电荷密度（Charge
Density）</strong>的计算精度</p>
<p>默认值：LASPH = .FALSE.</p>
<p><strong>作用</strong>：决定是否在计算中考虑电子密度和势场的<strong>非球对称部分</strong>（即角动量
<code>l &gt; 0</code> 的贡献）。</p>
<ul>
<li>若<code>LASPH = .TRUE.</code>，VASP会计算电子密度和势场的高阶角动量分量（如
<code>d, f</code> 轨道），提升精度。</li>
<li>若<code>LASPH = .FALSE.</code>（默认值），仅考虑球对称部分（<code>l = 0</code>），计算更快但可能损失部分精度</li>
</ul>
<h2
id="mdalgo指定分子动力学模拟算法">MDALGO——指定分子动力学模拟算法</h2>
<p><strong>（当 IBRION = 0 且 VASP 使用-Dtbdyn
编译时才启用）</strong></p>
<p>MDALGO = 0 | 1 | 2 | 3 | 4 | 5 | 11 | 21 | 13</p>
<table>
<colgroup>
<col style="width: 10%" />
<col style="width: 24%" />
<col style="width: 7%" />
<col style="width: 57%" />
</colgroup>
<thead>
<tr>
<th>MDALGO 取值</th>
<th>恒温器 / 模拟方式</th>
<th>适用系综</th>
<th>设置要点</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td>标准分子动力学</td>
<td>NVE</td>
<td>设置 IBRION=0、TEBEG、POTIM、NSW；MDALGO=0；SMASS=-3</td>
</tr>
<tr>
<td>1</td>
<td>安徒生恒温器</td>
<td>NVT</td>
<td>设置 IBRION=0、TEBEG、POTIM、NSW；MDALGO=1；选择合适的
ANDERSEN_PROB</td>
</tr>
<tr>
<td>2</td>
<td>Nose-Hoover 恒温器</td>
<td>NVT</td>
<td>设置 IBRION=0、TEBEG、POTIM、NSW；MDALGO=2；选择合适的 SMASS</td>
</tr>
<tr>
<td>3</td>
<td>朗之万恒温器</td>
<td>NVT、NpT</td>
<td>NVT 模拟：设置 IBRION=0、TEBEG、POTIM、NSW；ISIF=2；MDALGO=3；在
POSCAR 文件通过 LANGEVIN_GAMMA-tag 指定摩擦系数 NpT 模拟：设置
IBRION=0、TEBEG、POTIM、NSW；ISIF=3；MDALGO=3；在 POSCAR 文件通过
LANGEVIN_GAMMA-tag 指定摩擦系数；通过 LANGEVIN_GAMMA_L-tag
指定晶格自由度摩擦系数；通过 PMASS-tag 设置晶格自由度质量；可通过
PSTRESS-tag 定义外部压力</td>
</tr>
<tr>
<td>4</td>
<td>Nose Hoover chains 恒温器</td>
<td>NVT</td>
<td>设置 IBRION=0、TEBEG、POTIM、NSW；ISIF=2；MDALGO=4；选择 NHC_NCHAINS
和 NHC_PERIOD</td>
</tr>
<tr>
<td>5</td>
<td>CSVR 恒温器</td>
<td>NVT</td>
<td>设置 IBRION=0、TEBEG、POTIM、NSW；ISIF=2；MDALGO=5；选择
CSVR_PERIOD</td>
</tr>
<tr>
<td>13</td>
<td>多个安徒生恒温器</td>
<td>-</td>
<td>在 POSCAR 文件按顺序定义子系统原子位置；设置 NSUBSYS
定义每个子系统的最后一个原子；设置 TSUBSYS
定义每个子系统的模拟温度；设置 PSUBSYS
定义每个子系统原子的碰撞概率（0≤PSUBSYS≤1）</td>
</tr>
</tbody>
</table>
<h2
id="smass在从头算分子动力学运行期间控制速度">SMASS——在从头算分子动力学运行期间控制速度。</h2>
<p>SMASS = -3 | -2 | -1 | [real] ≥ 0</p>
<p>Default: <strong>SMASS</strong> = -3</p>
<p>对于SMASS = -3，模拟了一个微正则系综（NVE系综）</p>
<blockquote>
<p><strong>Tip:</strong> To calculate an <a
target="_blank" rel="noopener" href="https://www.vasp.at/wiki/index.php/NVE_ensemble">NVE ensemble</a>
we instead recommend to use <code>MDALGO = 1</code> and
<code>ANDERSEN_PROB = 0.0</code></p>
</blockquote>
<p>对于 SMASS =
-2，初始速度保持恒定。这使得能够计算一组不同线性相关位置（例如冻结声子或具有不同键长的二聚体）的能量。</p>
<p>注意：如果 SMASS = -2，实际采取的步数为 POTIM×（从 POSCAR
文件读取的速度）。为避免歧义，请将 POTIM 设置为 1</p>
<h2 id="ivdw参数控制范德华修正">IVDW参数——控制范德华修正</h2>
<p>DFT中，标准的交换关联泛函（如PBE、LDA）无法准确描述范德华力，因此需要通过额外的修正方法来处理</p>
<p>默认不启用范德华修正</p>
<ul>
<li><strong>IVDW = 0</strong>：不启用范德华修正（默认值）。</li>
<li><strong>IVDW =
1</strong>：启用<strong>DFT-D2</strong>方法（Grimme的DFT-D2修正）。</li>
<li><strong>IVDW =
10</strong>：启用<strong>DFT-D3</strong>方法（Grimme的DFT-D3修正，不带Becke-Johnson阻尼）。</li>
<li><strong>IVDW =
11</strong>：启用<strong>DFT-D3</strong>方法（带Becke-Johnson阻尼，即DFT-D3(BJ)）。</li>
<li><strong>IVDW =
12</strong>：启用<strong>DFT-D4</strong>方法（Grimme的DFT-D4修正）。</li>
<li><strong>IVDW = 20</strong>：启用<strong>Tkatchenko-Scheffler
(TS)</strong>方法。</li>
<li><strong>IVDW = 21</strong>：启用<strong>Tkatchenko-Scheffler with
self-consistent screening (TS-SCS)</strong>方法。</li>
</ul>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2025/04/14/%E7%A7%91%E7%A0%94/VASP/Starry%20Sky/Vasp-note/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    
    <article class="postShorten postShorten--thumbnailimg-bottom">
        <div class="postShorten-wrap">
            
            <div class="postShorten-header">
                <h1 class="postShorten-title">
                    
                        <a
                            class="link-unstyled"
                            href="/2025/04/12/%E7%A7%91%E7%A0%94/first%20stage/%E7%94%B5%E6%B1%A0%E5%82%A8%E8%83%BD%E5%BE%AE%E4%B8%93%E4%B8%9A/"
                            aria-label=": 电池储能微专业"
                        >
                            电池储能微专业
                        </a>
                    
                </h1>
                <div class="postShorten-meta">
    <time datetime="2025-04-12T17:24:00+08:00">
	
		    Apr 12, 2025
    	
    </time>
    
        <span>in </span>
        
    <a class="category-link" href="/all-categories/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%9A%84%E7%A7%91%E7%A0%94%E4%B9%8B%E6%97%85/">从零开始的科研之旅</a>, <a class="category-link" href="/all-categories/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E7%9A%84%E7%A7%91%E7%A0%94%E4%B9%8B%E6%97%85/first-stage/">first stage</a>


    
</div>

            </div>
            
                <div class="postShorten-content">
                    <h2 id="相相变和相图">相、相变和相图</h2>
<p>锂电池中的相？——有助于获得==晶体结构与组成==</p>
<p>关注材料的e物相，包括晶体结构、化学组成、结晶度、固液态</p>
<p>从电子自旋态来看，==3d电子常常具有自旋长程关联作用==，表现出不同的磁性状态</p>
<p>==磁态来解释充放电过程中的异常情况==</p>
<ul>
<li>一级相变</li>
<li>二级相变</li>
</ul>
<p>大部分固态相变属于一级相变，只有少部分属于二级相变</p>
<p>显著平台——一级相变</p>
<p>保持固溶体——二级相变</p>
<p>NIPP钠电池正极</p>
<p>前驱体的合成可能出现杂相</p>
<h3
id="温度和相组成是最重要的两个参量others高压磁场电场机械搅拌">温度和相组成是最重要的两个参量（others:高压、磁场、电场、机械搅拌）</h3>
<h3
id="高压法一级固相合成法制备偏铝酸锂">高压法一级固相合成法制备偏铝酸锂</h3>
<p>==LiAlO<sub>2</sub>==具有较高化学稳定性和热吻星星</p>
<p>==六方相R-3m==正极材料,<span
class="math inline"><em>α</em> − <em>N</em><em>a</em><em>F</em><em>e</em><em>O</em><sub>2</sub></span>结构，相容性比较好，可用作包覆材料，包覆后形成固溶体很难表征</p>
<h2
id="高压limn2o4和li2mno3">高压LiMn<sub>2</sub>O<sub>4</sub>和Li<sub>2</sub>MnO<sub>3</sub></h2>
<p>锂电正极非常关键的程序是——煅烧</p>
<h3 id="电解质中的相变">电解质中的相变</h3>
<p>目前主要采用液体电解质和聚合物胶体电解质（有机液体、固态）</p>
<p>低温熔融盐：离子液体</p>
<p>相转变型电解质</p>
<p>当温度升高时，分子晶体中的位置有序可能出现三种情况：</p>
<ol type="1">
<li></li>
<li>塑性晶体——长程有序，短程无序
<ol type="1">
<li>非离子型</li>
<li>离子型</li>
</ol></li>
<li>液晶</li>
</ol>
<p>在T<sub>g</sub>之上的</p>
<p>液态电解液的的运输：溶剂化效应与去溶剂化效应</p>
<p>固态电解质尽量选软一点的，贴合得比较好</p>
<p>NASCION（锂离子快离子导体）相变</p>
<p>按照缺陷类型和相变机制可以将固态电解质分为三类</p>
<ul>
<li>点缺陷</li>
<li>一级相变</li>
<li>二级相变</li>
</ul>
<p>既可做正极材料又可作固态电解质</p>
<p>固态电解质</p>
<ul>
<li>足够多的空位</li>
<li>好的晶体结构</li>
<li>协同传输效应</li>
</ul>
<p>负极材料的相变</p>
<p>将锂插入层间可得到LiC24</p>
<h2 id="极端条件下的低温电池">极端条件下的低温电池</h2>
<h3 id="锂电池的工作原理">锂电池的工作原理</h3>
<p>+：磷酸铁锂</p>
<p>-：石墨</p>
<ul>
<li>锂离子从晶格中脱出</li>
<li>溶剂化</li>
<li>去溶剂化</li>
<li>插层</li>
</ul>
<p>低温失活原理</p>
<ul>
<li>电解液凝固失活</li>
<li>离子导电性降低</li>
<li>界面去溶剂化减慢</li>
<li>界面层和电极内部传输缓慢</li>
</ul>
<h3 id="解决">解决</h3>
<p>电池结构优化—加热元件</p>
<p>各种外部加热策略：</p>
<ul>
<li>基于空气</li>
<li>基于液体</li>
<li>基于PCM</li>
<li>基于热管</li>
<li>基于电阻元件</li>
<li>基于帕尔贴效应</li>
</ul>
<p>各种内加热策略：</p>
<ul>
<li>直流加热</li>
<li>交流加热</li>
<li>脉冲电流加热</li>
<li>混合电流加热</li>
<li>自加热</li>
</ul>
<p>溶剂优化—凝固点</p>
<ul>
<li><p>降低液体凝固点</p></li>
<li><p>液态气体电解液：常温气体、低温液体</p></li>
</ul>
<p>低温溶剂可能粘度比较大</p>
<p>基本要求：</p>
<ul>
<li>液程足够宽</li>
<li>低温下至少0.1 mS/cm</li>
<li>稳定的工作电压&gt;4.5 V</li>
</ul>
<p>电解液优化方案：</p>
<ul>
<li>减小溶剂-溶剂相互作用</li>
<li></li>
</ul>
<h2 id="钠离子电池">钠离子电池</h2>
<p>经典文献：</p>
<ul>
<li><p>Time for lithium-ion alternative</p></li>
<li><p>sodium is the lithium</p></li>
<li><p>fundamentals,stauts and promise od sodoium-based</p></li>
</ul>
<p>能量密度雨锂离子电池有差距，<strong>原子质量</strong>比较大，<strong>原子半径</strong>更大造成能量密度低，钠离子<strong>迁移更慢</strong>导致功率密度低</p>
<p>，<strong>相对标准电极电位更大</strong>，全电池电压较小</p>
<ul>
<li>单纯扩散脱出</li>
<li>氧化还原机理</li>
<li>金属</li>
</ul>
<p>体积比容量(mAh/cm)，比容量(mAh/g)</p>
<p>液态钠离子电池：</p>
<ul>
<li><p>正极=磷酸烦呐+conductive additive</p></li>
<li><p>隔膜：玻璃纤维</p></li>
</ul>
<p>全固态钠离子电池</p>
<ul>
<li>正极以后</li>
<li>Na负极</li>
<li>ISE电解质</li>
</ul>
<p>提升质量能量密度、提及能量密度，成本降低、安全更高</p>
<p>问题：</p>
<ul>
<li>表面副反应</li>
<li>接触“缝隙”</li>
<li>体积膨胀加剧破碎</li>
<li>电化学稳定性（电解质不稳定，充放电时发生反应）</li>
</ul>
<h3 id="固态电解质">固态电解质</h3>
<p>关键性能指标</p>
<ul>
<li>Hugh ionic conductivity高离子电导率</li>
<li>High stability化学稳定性与电化学稳定性</li>
<li>High transference
number离子迁移数（0.3-0.4商用锂离子电池，理想情况固态电解质阳离子迁移数=1，阴离子不动，消除浓差极化，聚合物固态电解质在两只之间）</li>
<li>Good mechanical property好的机械性能</li>
<li>Compatible interface界面相容性，不会发生界面反应</li>
<li>比较低的电子电导率（&lt;10^-9，与离子电导率相差10-6数量级）</li>
<li>宽的电化学窗口</li>
<li>高的电化学阻抗High electronic resistance</li>
</ul>
<p>聚合物固态电解质</p>
<p>无极固态电解质</p>
<ul>
<li><span class="math inline">$\rm{\beta-Al_2O_3}$</span></li>
<li><strong>NASICON</strong>钠超离子导体</li>
<li>硼氢化物</li>
<li>Perovskite</li>
<li>反式钙钛矿</li>
<li>argyrodite
<ul>
<li>电化学窗口窄（S的性质所决定的）</li>
</ul></li>
<li>尖晶石相（Li,La,Zr,O）</li>
</ul>
<p>离子的体相传输机制</p>
<ul>
<li>间隙</li>
<li>空位</li>
<li>other</li>
</ul>
<p><strong>晶界</strong></p>
<p>111生长&amp;110生长</p>
<p>电流密度-电势梯度、浓度梯度：能斯特-普朗克方程 <span
class="math display">$$
\sigma_i=\dfrac{\sigma_o}{T}e^{-\dfrac{E_a}{RT}}
$$</span> 离子电导率和温度、活化能的关系</p>
<p>测阻抗谱计算材料在测</p>
<p>什么样的材料是快离子导体呢（&gt;10mS/cm）</p>
<ul>
<li><p>多面体畸变（Jahn-Teller效应）</p></li>
<li><p>配位环境决定，迁移到低能量位点（比如尖晶石结构）</p></li>
<li><p>阴离子的旋转机制</p></li>
<li><p>增大无序度（高熵材料）</p></li>
</ul>
<p>离子在晶界处的传输？</p>
<h3 id="钠离子负极处">钠离子负极处</h3>
<ul>
<li>导电性，能带理论，费米面与导带的位置关系</li>
<li>DFT给出SEI膜的稳定性，LiF&gt;LiCl&gt;Li2O</li>
</ul>
<p>有三种可能存在的界面</p>
<ul>
<li>Stable</li>
<li>MCI（离子-电子混合导体）</li>
<li>SEI</li>
</ul>
<p>金属的沉积性质</p>
<ul>
<li>Insufficient Contact</li>
<li>Contamination Layers</li>
<li>Grain Boundaries</li>
<li>Surface Defects</li>
</ul>
<p>负极和界面的问题</p>
<ul>
<li>尖端效应导致锂枝晶沿着晶界很快长到电池对面</li>
<li>造成死锂引起短路</li>
</ul>
<p>失效机制</p>
<ul>
<li>正极材料颗粒与固态电解质失去接触</li>
</ul>
<p><strong>储能电池与动力电池</strong></p>
<p>350Wkh/kg——液态电池，固态电池不用隔膜（非活性物质）</p>
<ul>
<li><p>正极开裂，正极全固态电池中不同部位的力学性能不同，应变不同</p></li>
<li><p>泊松比决定是否容易断裂</p></li>
<li><p>力学均一性</p></li>
<li><p>第二相结晶强化</p></li>
</ul>

                    
                        


                    
                    
                        <p>
                            <a
                                href="/2025/04/12/%E7%A7%91%E7%A0%94/first%20stage/%E7%94%B5%E6%B1%A0%E5%82%A8%E8%83%BD%E5%BE%AE%E4%B8%93%E4%B8%9A/#post-footer"
                                class="postShorten-excerpt_link link"
                                aria-label=""
                            >
                                Comment and share
                            </a>
                        </p>
                    
                </div>
            
        </div>
        
    </article>
    
    <div class="pagination-bar">
    <ul class="pagination">
        
          <li class="pagination-prev">
            <a
                class="btn btn--default btn--small"
                href="/all-tags/%E7%A7%91%E7%A0%94/page/2/"
                aria-label="NEWER POSTS"
            >
              <i class="fa fa-angle-left text-base icon-mr"></i>
              <span>NEWER POSTS</span>
            </a>
          </li>
        
        
          <li class="pagination-next">
            <a
                class="btn btn--default btn--small"
                href="/all-tags/%E7%A7%91%E7%A0%94/page/4/"
                aria-label="OLDER POSTS"
            >
              <span>OLDER POSTS</span>
              <i class="fa fa-angle-right text-base icon-ml"></i>
            </a>
          </li>
        
        <li class="pagination-number">page 3 of 4</li>
    </ul>
</div>

</section>


                <footer id="footer" class="main-content-wrap">
    <span class="copyrights">
        Copyrights &copy; 2025 John Doe. All Rights Reserved.
    </span>
</footer>

            </div>
            
        </div>
        


<div id="about">
    <div id="about-card">
        <div id="about-btn-close">
            <i class="fa fa-times"></i>
        </div>
        
            <h4 id="about-card-name">John Doe</h4>
        
            <div id="about-card-bio"><p>author.bio</p>
</div>
        
        
            <div id="about-card-job">
                <i class="fa fa-briefcase"></i>
                <br/>
                <p>author.job</p>

            </div>
        
        
    </div>
</div>

        
        
<div id="cover" style="background-image:url('/assets/images/cover.jpg');"></div>
        <!--SCRIPTS-->

<script src="/assets/js/script-akgy1kkmfssyzznzlvk9mjwcvnsn87aqalldnf43rojvlib0s8vpmeb5mayw.min.js"></script>

<!--SCRIPTS END-->





    </body>
</html>
